/*1369013498,178142507*/

if (self.CavalryLogger) { CavalryLogger.start_js(["5WGZh"]); }

__d("BassWhitespaceListener",["Bootloader","Event","Parent","copyProperties","goURI"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('Event'),i=b('Parent'),j=b('copyProperties'),k=b('goURI');function l(m,n){this.link=n;h.listen(m,'click',this.onclicked.bind(this));}j(l.prototype,{onclicked:function(m){if(i.byTag(m.getTarget(),'A'))return;switch(this.link.getAttribute('rel')){case 'async':g.loadModules(['AsyncRequest'],function(o){o.bootstrap(this.link.getAttribute('ajaxify'),this.link);}.bind(this));break;case 'theater':var n=i.byClass(m.getTarget(),'fbPhotoSnowlift');g.loadModules(['PhotoViewer'],function(o){o.bootstrap(this.link.getAttribute('ajaxify'),this.link);}.bind(this));if(n)return false;break;default:k(this.link.getAttribute('href'));}}});e.exports=l;});
__d("legacy:ad-units-stream-whitespace",["BassWhitespaceListener"],function(a,b,c,d){a.BassWhitespaceListener=b('BassWhitespaceListener');},3);
__d("CalendarUI",["Event","Arbiter","AsyncRequest","CSS","DOM","DOMQuery","DOMScroll","Hovercard","Parent","Run","ScrollAwareDOM","Style","UIPagelet","Vector","ViewportBounds","$","copyProperties","ge","goURI"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('CSS'),k=b('DOM'),l=b('DOMQuery'),m=b('DOMScroll'),n=b('Hovercard'),o=b('Parent'),p=b('Run'),q=b('ScrollAwareDOM'),r=b('Style'),s=b('UIPagelet'),t=b('Vector'),u=b('ViewportBounds'),v=b('$'),w=b('copyProperties'),x=b('ge'),y=b('goURI');function z(){}w(z,{EVENT_ACTION:'EVENT_ACTION',SUGGESTIONS_LOADED:'SUGGESTIONS_LOADED',HIDE_SUGGESTED_EVENT:'HIDE_SUGGESTED_EVENT',_todayButton:null,_todayElement:null,_registeredReminders:false,init:function(){h.subscribe(this.EVENT_ACTION,function(){s.loadFromEndpoint('CalendarHeaderPagelet','pagelet_calendar_header');if(x('pagelet_calendar_invites'))s.loadFromEndpoint('CalendarInvitesPagelet','pagelet_calendar_invites');});var aa=u.addTop(function(){var ba=x('pagelet_calendar_header');if(ba&&r.isFixed(ba.firstChild)){var ca=ba.firstChild.getBoundingClientRect();return ca.bottom;}return 0;});p.onLeave(function(){aa.remove();});},initGridItem:function(aa,ba){g.listen(aa,'click',function(event){if(o.byTag(event.getTarget(),'a'))return;i.bootstrap(ba,aa.firstChild);return;});},initGridItemList:function(aa,ba,ca){h.subscribe(this.SUGGESTIONS_LOADED,function(da,ea){if(ba==ea.timestamp)for(var fa=0;fa<ca&&fa<ea.content.length;fa++)k.appendContent(aa,ea.content[fa]);});},initScrollItem:function(aa,ba){g.listen(aa,'click',this.scrollTo.bind(this,ba));},scrollTo:function(aa,ba){aa=l.isNode(aa)?aa:x(aa);var ca=0;if(aa){var da=t.getElementPosition(v('fbCalendarWrapper')).y,ea=t.getElementPosition(aa).y;ca=ea-da;}else ca=t.getElementPosition(v('bottomContent')).y;m.scrollTo(new t(0,ca,'document'),ba!==false);},initUnhide:function(aa,ba){g.listen(aa,'click',function(event){var ca=o.byClass(ba,'fbCalendarItem');k.remove(ba);j.removeClass(k.find(ca,'.fbHiddenCalendarItem'),'fbHiddenCalendarItem');});},registerHomepageReminders:function(){if(!this._registeredReminders){h.subscribe(this.EVENT_ACTION,function(aa,ba){if(x('pagelet_reminders'))s.loadFromEndpoint('RemindersPagelet','pagelet_reminders');});this._registeredReminders=true;}},registerTodayClickHandler:function(){this._todayButton.onclick=null;g.listen(this._todayButton,'click',this.scrollTo.bind(this,this._todayElement));},registerTodayElement:function(aa){this._todayElement=l.isNode(aa)?aa:x(aa);this._todayButton&&this.registerTodayClickHandler();},registerTodayButton:function(aa){this._todayButton=aa;this._todayElement&&this.registerTodayClickHandler();},registerEventLink:function(aa,ba){h.subscribe(this.EVENT_ACTION,function(ca,da){if(da.eid===ba){var ea=l.scry(v("facebook"),".fbCalendarSuggestedLabel");if(ea.length>0)j.addClass(ea[0],"hidden_elem");switch(da.action){case 'GOING':j.removeClass(aa.parentNode,"hidden_elem");j.removeClass(aa,"fbCalendarEventSuggested");j.addClass(aa,"fbCalendarEventGoing");break;case 'MAYBE':j.removeClass(aa.parentNode,"hidden_elem");j.removeClass(aa,"fbCalendarEventSuggested");j.removeClass(aa,"fbCalendarEventGoing");break;case 'DECLINED':case 'HIDDEN':n.hide(true);j.addClass(aa.parentNode,"hidden_elem");break;case 'EDITED':if(da.name)k.setContent(aa,da.name);if(da.day){var fa=x("pagelet_calendar_day_"+da.day);if(fa){var ga=l.find(fa,".fbCalendarGridEventList");if(l.scry(ga,"li").length>=4){j.addClass(aa.parentNode,"hidden_elem");s.loadFromEndpoint("CalendarDayPagelet","pagelet_calendar_day_"+da.day,{day:da.timestamp});}else k.prependContent(ga,aa.parentNode);}else j.addClass(aa.parentNode,"hidden_elem");}break;}}});},informEventGoing:function(aa){h.inform(this.EVENT_ACTION,{eid:aa,action:'GOING'});},informEventMaybe:function(aa){h.inform(this.EVENT_ACTION,{eid:aa,action:'MAYBE'});},informEventDeclined:function(aa){h.inform(this.EVENT_ACTION,{eid:aa,action:'DECLINED'});},informEventHidden:function(aa){h.inform(this.EVENT_ACTION,{eid:aa,action:'HIDDEN'});},informEventEdited:function(aa,ba,ca,da){h.inform(this.EVENT_ACTION,{eid:aa,action:'EDITED',name:ba,day:ca,timestamp:da});},informSuggestionsAdded:function(aa,ba){h.inform(this.SUGGESTIONS_LOADED,{timestamp:aa,content:ba});},removeCalendarListHeader:function(aa){var ba=k.scry(aa,"^.fbCalendarList .fbCalendarItem"),ca=k.find(aa,"^.fbCalendarItem");if(ba.length==1)ca=k.find(aa,"^.fbCalendarList");k.remove(ca);},reloadPage:function(){y(window.location);},unhide:function(aa){!function(){q.monitor(aa.nextSibling,j.show.curry(aa));}.defer();}});e.exports=z;});
__d("ChatOnlineFriends",["ChatTypeaheadBehavior","ChatTypeaheadCore","ChatTypeaheadDataSource","ChatTypeaheadRenderer","Typeahead","AvailableList","AvailableListConstants","ChannelConnection","Chat","ChatConfig","ChatVisibility","CSS","DataStore","DOM","Event","MercuryParticipantTypes","OrderedFriendsList","Parent","Run","ShortProfiles","TooltipLink","XHPTemplate","copyProperties","createObjectFrom","cx","shield"],function(a,b,c,d,e,f){b('ChatTypeaheadBehavior');b('ChatTypeaheadCore');b('ChatTypeaheadDataSource');b('ChatTypeaheadRenderer');b('Typeahead');var g=b('AvailableList'),h=b('AvailableListConstants'),i=b('ChannelConnection'),j=b('Chat'),k=b('ChatConfig'),l=b('ChatVisibility'),m=b('CSS'),n=b('DataStore'),o=b('DOM'),p=b('Event'),q=b('MercuryParticipantTypes'),r=b('OrderedFriendsList'),s=b('Parent'),t=b('Run'),u=b('ShortProfiles'),v=b('TooltipLink'),w=b('XHPTemplate'),x=b('copyProperties'),y=b('createObjectFrom'),z=b('cx'),aa=b('shield');function ba(da){switch(da){case h.OFFLINE:return 'chatOffline';case h.IDLE:return 'chatIdle';case h.ACTIVE:return 'chatOnline';case h.MOBILE:return 'chatMobile';}}var ca=function(da,ea,fa,ga,ha,ia,ja){var ka=(ga&&ha)||(ia&&ja);if(da&&ea&&fa&&ka)this.init(da,ea,fa,ga,ha,ia,ja);};x(ca.prototype,{chatFriends:{},chatStatuses:['chatOnline','chatIdle','chatMobile','chatOffline'],_availableListSubscribe:function(event,da){this._arbiterTokens.push(g.subscribe(event,da));},_channelSubscribe:function(event,da){this._arbiterTokens.push(i.subscribe(event,da));},onunload:function(){this._arbiterTokens.forEach(function(da){da.unsubscribe();});},_setStatus:function(da,ea){if(m.hasClass(da,ea))return;this.chatStatuses.forEach(function(fa){m.conditionClass(da,fa,fa==ea);});},initTypeahead:function(da,ea,fa){da.subscribe('reset',function(){m.show(ea);});da.subscribe('query',function(ga,ha){m.conditionShow(ea,!ha.value);});if(fa)da.subscribe(['query','reset'],function(ga){m.conditionShow(fa,ga==='reset');});},init:function(da,ea,fa,ga,ha,ia,ja){this.maxElements=da;this._faceTmpl=ha;this._arbiterTokens=[];this._root=fa;t.onLeave(this.onunload.bind(this));var ka=o.scry(fa,'.chatUpgradeLink');this.initTypeahead(ea,ga||ia,ka[0]);var la=o.find(fa,'.sidebarBtn');p.listen(la,'click',function(event){j.toggleSidebar();event.kill();});this._faceFutures&&this._hideAllFaces();this._faceFutures=[];this._orderedFriends=r.getList();this._hashedFriends=y(this._orderedFriends);this._availableListSubscribe(h.ON_AVAILABILITY_CHANGED,aa(this.update,this));this.update.bind(this).defer();this._channelSubscribe(i.CONNECTED,aa(this.update,this));this._channelSubscribe(i.RECONNECTING,this._handleChannelReconnecting.bind(this));this._channelSubscribe(i.SHUTDOWN,this._handleChannelShutdown.bind(this));this._channelSubscribe([i.MUTE_WARNING,i.UNMUTE_WARNING],aa(this.update,this));if(ga){this._facepile=ga.firstChild;p.listen(ga,'click',this.clickHandler.bind(this));}else{this._miniDivebar=ia;this._divebarTmpl=ja;}p.listen(o.find(fa,'.fbChatGoOnlineLink'),'click',function(event){if(i.disconnected()){j.openBuddyList();}else l.goOnline(j.openBuddyList);event.kill();}.bind(this));p.listen(o.find(fa,'.fbChatReconnectLink'),'click',function(event){if(i.disconnected())i.reconnect();event.kill();}.bind(this));g.update();},_updateMiniDivebar:function(){var da=Math.min(this._orderedFriends.length,10),ea=[];for(var fa=0;fa<da;fa++)ea.push(this._renderDivebarItem(this._orderedFriends[fa]));o.setContent(this._miniDivebar,ea);},_renderDivebarItem:function(da){var ea=this._divebarTmpl.build(),fa=ea.getNode('anchor'),ga=ea.getNode('status'),ha=g.get(da);if(ha===h.ACTIVE){m.addClass(ga,'active');}else if(ha===h.MOBILE)m.addClass(ga,'mobile');u.get(da,function(ia){ea.setNodeContent('name',ia.name).setNodeProperty('profile-photo','src',ia.thumbSrc);p.listen(fa,'click',function(){var ja={source:'online_friends',mode:'miniDivebar'};j.openTab(da,q.FRIEND,ja);return false;});});return ea.getRoot();},_handleChannelReconnecting:function(da,ea){var fa=(ea<1000),ga=o.find(this._root,'.fbChatReconnectLink'),ha=o.find(this._root,'.fbChatReconnecting');m.conditionShow(ga,!fa);m.conditionShow(ha,fa);},_handleChannelShutdown:function(){var da=o.find(this._root,'.fbChatReconnectLink'),ea=o.find(this._root,'.fbChatReconnecting');m.hide(da);m.hide(ea);},update:function(){var da=i.disconnected(),ea=l.isOnline();m.conditionClass(this._root,'disconnected',da);if(this._facepile){m.conditionShow(this._facepile,ea);ea&&this._updateFacepile(da);}else ea&&this._updateMiniDivebar();var fa=o.find(this._root,'.typeaheadContainer');m.conditionShow(fa,ea);if(k.get('chat_upgrade_link')){var ga=o.find(this._root,'.chatUpgradeLink');m.conditionShow(ga,ea);}var ha=o.find(this._root,'.chatGoOnlineLink');m.conditionShow(ha,!ea);var ia=o.find(this._root,'.chatReconnectLink');m.conditionShow(ia,ea&&da);},_updateFacepile:function(da){g.getAvailableIDs().forEach(function(ka){if(!this._hashedFriends[ka]){this._orderedFriends.push(ka);this._hashedFriends[ka]=true;}}.bind(this));var ea=0;for(var fa=0;fa<this._orderedFriends.length;fa++){var ga=this._orderedFriends[fa],ha=g.get(ga),ia=this._faceFutures[fa],ja=(da||ha!==h.OFFLINE)&&(ea<this.maxElements);if(ja){if(!ia){ia=this._makeFace(fa);this._faceFutures[fa]=ia;}ea++;}this._updateFace(ia,ja,ba(ha));}},_updateFace:function(da,ea,fa){da&&da(function(ga){this._setStatus(ga,fa);m.conditionShow(ga,ea);}.bind(this));},_makeFace:function(da){var ea=null,fa=null,ga=this._orderedFriends[da];u.get(ga,function(ha){fa=this._faceTmpl.render();n.set(fa,'friendID',ga);var ia=w.getNode(fa,'img'),ja=ia.cloneNode(false);ja.setAttribute('src',ha.thumbSrc);o.replace(ia,ja);var ka=w.getNode(fa,'anchor');v.setTooltipText(ka,ha.name);ea&&ea(fa);var la=false;for(var ma=da+1;ma<this._orderedFriends.length&&!la;ma++){var na=this._faceFutures[ma],oa=na&&na();if(oa){this._facepile.insertBefore(fa,oa);la=true;}}if(!la)this._facepile.appendChild(fa);}.bind(this));return function ha(ia){if(ia)if(fa){ia(fa);}else ea=ia;return fa;};},clickHandler:function(event){var da=event.getTarget(),ea=s.byClass(da,"_43q7");if(ea){var fa=n.get(ea,'friendID');if(fa&&l.isOnline()){var ga={source:'online_friends',mode:'miniDivebar'};j.openTab(fa,q.FRIEND,ga);return false;}}},_hideAllFaces:function(){this._faceFutures.forEach(function(da){da&&da(function(ea){o.remove(ea);});});}});e.exports=ca;});
__d("Encoding",[],function(a,b,c,d,e,f){var g={toBytes:function(n){for(var o=[],p=0;p<n.length;p++)o.push(n.charCodeAt(p)&255);return o;},fromBytes:function(n){for(var o=[],p=0;p<n.length;p++)o.push(String.fromCharCode(n[p]));return o.join("");}},h={toBytes:function(n){return g.toBytes(window.unescape(encodeURIComponent(n)));},fromBytes:function(n){return decodeURIComponent(window.escape(g.fromBytes(n)));}},i={toBytes:function(n){for(var o=[],p=0;p<n.length*32;p+=8)o.push((n[p>>>5]>>>(24-p%32))&255);return o;},fromBytes:function(n){for(var o=[],p=0,q=0;p<n.length;p++,q+=8)o[q>>>5]|=(n[p]&255)<<(24-q%32);return o;}},j={fromBytes:function(n){for(var o=[],p=0;p<n.length;p++){o.push((n[p]>>>4).toString(16));o.push((n[p]&15).toString(16));}return o.join("");},toBytes:function(n){for(var o=[],p=0;p<n.length;p+=2)o.push(parseInt(n.substr(p,2),16));return o;}},k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l={toBytes:function(n){if(typeof window.atob=="function")return g.toBytes(window.atob(n));n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var o=[],p=0,q=0;p<n.length;q=++p%4){if(q===0)continue;o.push(((k.indexOf(n.charAt(p-1))&(Math.pow(2,-2*q+8)-1))<<(q*2))|(k.indexOf(n.charAt(p))>>>(6-q*2)));}return o;},fromBytes:function(n){if(typeof window.btoa=="function")return window.btoa(g.fromBytes(n));for(var o=[],p=0;p<n.length;p+=3){var q=(n[p]<<16)|(n[p+1]<<8)|n[p+2];for(var r=0;r<4;r++)if(p*8+r*6<=n.length*8){o.push(k.charAt((q>>>6*(3-r))&63));}else o.push("=");}return o.join("");}},m={UTF8:h,binary:g,words:i,hex:j,base64:l};e.exports=m;});
__d("CryptoUtil",[],function(a,b,c,d,e,f){var g={rotl:function(h,i){return (h<<i)|(h>>>(32-i));},rotr:function(h,i){return (h<<(32-i))|(h>>>i);},endian:function(h){if(h.constructor==Number)return g.rotl(h,8)&16711935|g.rotl(h,24)&4278255360;for(var i=0;i<h.length;i++)h[i]=g.endian(h[i]);return h;},randomBytes:function(h){for(var i=[];h>0;h--)i.push(Math.floor(Math.random()*256));return i;}};e.exports=g;});
__d("GiftsBirthdayPrompt",["CryptoUtil","CSS","csx","DOM","Encoding","copyProperties"],function(a,b,c,d,e,f){var g=b('CryptoUtil'),h=b('CSS'),i=b('csx'),j=b('DOM'),k=b('Encoding'),l=b('copyProperties');function m(o,p){this._recBlocks=[];this._contentBlocks=[];var q=j.scry(o,"._52kw");for(var r=0;r<q.length;r++){var s=q[r],t=s.getAttribute('data-recipientid');if(!t)continue;var u=j.scry(s,"._52kx")[0];if(u)this._recBlocks[t]=u;this._contentBlocks[t]=j.find(s,"._52ky");}var v=j.scry(o,"._55kn");for(r=0;r<v.length;r++){var w=j.create('input',{type:'hidden',name:'giftsgroupid',value:p});v[r].appendChild(w);}}l(m.prototype,{show:function(o,p){var q=this._contentBlocks[o];if(!q)return;if(p)j.setContent(q,p);for(var r in this._contentBlocks)if(this._contentBlocks.hasOwnProperty(r))h.hide(this._contentBlocks[r]);for(var s in this._recBlocks)if(this._recBlocks.hasOwnProperty(s))h.show(this._recBlocks[s]);if(this._recBlocks[o])h.hide(this._recBlocks[o]);h.show(q);}});var n={_groups:[],init:function(o){var p=k.hex.fromBytes(g.randomBytes(5));this._groups[p]=new m(o,p);},show:function(o,p,q){if(!this._groups[o])return;this._groups[o].show(p,q);}};e.exports=n;});
__d("AppRequestReminders",["AsyncRequest","CSS","DOM","ge"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('ge'),k=0,l={},m=1,n=j('OtherAppReqReminder'),o=function(u,v,w){l[v]={node:u,seq:m++,reqCount:w};},p=function(u){k=u;},q=function(u){return u.id.split('_')[1];},r=function(u){var v=j(u),w=v.nextSibling;if(w!==n){h.show(w);k-=l[q(w)].reqCount;}s(k);},s=function(u){new g().setURI('/ajax/reminders/update_count.php').setData({new_count:u}).setMethod('POST').send();},t=function(u,v){if(n&&v&&u>0){i.setContent(j('OtherAppReqLabel'),v);}else if(n){h.hide(n);}else h.hide(j('OtherAppReqReminder'));};f.initNode=o;f.handleRemove=r;f.updateCount=t;f.setTotalOtherCount=p;});
__d("PopoverMenuContextMinWidth",["CSS","Style","copyProperties","cx","shield"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('Style'),i=b('copyProperties'),j=b('cx'),k=b('shield');function l(m){this._popoverMenu=m;this._popover=m.getPopover();}i(l.prototype,{_setMenuSubscription:null,_showSubscription:null,_menuSubscription:null,enable:function(){this._setMenuSubscription=this._popoverMenu.subscribe('setMenu',k(this._onSetMenu,this));},disable:function(){this._setMenuSubscription.unsubscribe();this._setMenuSubscription=null;if(this._showSubscription){this._showSubscription.unsubscribe();this._showSubscription=null;}if(this._menuSubscription){this._menuSubscription.unsubscribe();this._menuSubscription=null;}},_onSetMenu:function(){this._menu=this._popoverMenu.getMenu();this._showSubscription=this._popover.subscribe('show',k(this._updateWidth,this));this._menuSubscription=this._menu.subscribe(['change','resize'],k(Function.prototype.defer,k(this._updateWidth,this)));this._updateWidth();},_updateWidth:function(){var m=this._menu.getRoot(),n=this._popoverMenu.getTriggerElem(),o=n.offsetWidth;h.set(m,'min-width',o+'px');g.conditionClass(m,"_575s",o>=m.offsetWidth);}});e.exports=l;});
__d("AppRequestRemindersMenu",["DOMQuery","CSS","Form"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h=b('CSS'),i=b('Form'),j={init:function(k,l,m){var n=m.getTriggerElem();m=m.getPopover();m.subscribe(['show','hide'],function(o){var p=g.find(n,'^.fbRemindersRemove');h.conditionClass(p,'openMenu',o=='show');});l.subscribe('itemclick',function(o,p){var q=p.item.getValue();if(q){var r={};r[q]=true;i.createHiddenInputs(r,k);i.bootstrap(k);}});}};e.exports=j;});
__d("ReminderStory",["AsyncRequest","endsWith","Event","DOMQuery","ScrollableArea"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('endsWith'),i=b('Event'),j=b('DOMQuery'),k=b('ScrollableArea');function l(m,n,o){i.listen(m,'click',function(p){n.show();if(o){var q={context_data:o};new g().setURI('/growth/reminder/logging.php').setData(q).send();}});n.subscribe('aftershow',function(){var p=n.getRoot(),q=j.scry(p,'.inlineReplyTextArea');if(q.length>0)q[0].focus();var r=j.scry(p,'.jewelItemNew'),s=[];for(var t in r){var u=r[t].getAttribute('id');if(u&&h(u,'_1_req'))s=s.concat(u.replace('_1_req',''));}if(s.length>0)new g().setURI('/friends/requests/log_impressions').setData({ids:s.join(','),ref:'reminder_box'}).send();k.poke(j.scry(p,'.uiScrollableArea')[0]);});}e.exports=l;});
__d("JewelFollowupUnit",["DOM","Arbiter","CSS","csx","copyProperties"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('Arbiter'),i=b('CSS'),j=b('csx'),k=b('copyProperties');function l(m,n,o,p){this._followup=n;this._parentContainer=this._followup.parentElement;this._friendRequest=this._parentContainer.firstChild;o&&h.subscribe(o,function(r,s){(s.uid==m)&&this._showFollowup();}.bind(this));var q=g.scry(this._parentContainer,"._e7")[0];q&&(q.onclick=this._hideFollowup.bind(this));p&&h.subscribe(p,function(r,s){(s.uid==m)&&this._hideFollowup();}.bind(this));}k(l.prototype,{_showFollowup:function(){this._updateRequestAnimClass();i.addClass(this._followup,'active');i.addClass(this._parentContainer,'followupActivated');},_hideFollowup:function(){this._updateRequestAnimClass();i.removeClass(this._followup,'active');i.removeClass(this._parentContainer,'followupActivated');},_updateRequestAnimClass:function(){i.conditionClass(this._friendRequest,'animated',i.hasClass(this._followup,'animated'));}});e.exports=l;});
__d("Menu",["CSS","Class","DataStore","DOM","Event","Keys","Parent","PopoverMenuInterface","ScrollableArea","Style","UserAgent","copyProperties","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('Class'),i=b('DataStore'),j=b('DOM'),k=b('Event'),l=b('Keys'),m=b('Parent'),n=b('PopoverMenuInterface'),o=b('ScrollableArea'),p=b('Style'),q=b('UserAgent'),r=b('copyProperties'),s=b('cx');function t(u,v){this.parent.construct(this);this._items=[];for(var w=0;w<u.length;w++)this._items[w]=new u[w].ctor(u[w]);this._config=v||{};this._theme=v.theme||{};}h.extend(t,n);r(t.prototype,{_focused:null,_root:null,addItem:function(u){this._addItem(u);},addItemBefore:function(u,v){this._addItem(u,v,false);},addItemAfter:function(u,v){this._addItem(u,v,true);},_addItem:function(u,v,w){var x=this._items.indexOf(u);if(x>=0){var y=w?-1:1;if(this._items[x+y]==v)return;this._items.splice(x,1);}if(v){x=this._items.indexOf(v);if(x<0)throw new Error('reference item must already be in the menu');if(w)x++;this._items.splice(x,0,u);}else this._items.push(u);if(this._root)this._insertItem(u,v,w);},removeItem:function(u){var v=this._items.indexOf(u);if(v<0)return;this._items.splice(v,1);this._root&&j.remove(u.getRoot());},forEachItem:function(u){this._items.forEach(u);},getItemAt:function(u){return this._items[u]||null;},getRoot:function(){if(!this._root)this._render();return this._root;},onShow:function(){if(this._config.maxheight)if(!this._scrollableArea){p.set(this._scrollableElems.root,'width',this._scrollableElems.body.offsetWidth+'px');this._scrollableArea=o.fromNative(this._scrollableElems.root,{fade:true});p.set(this._scrollableElems.wrap,'max-height',this._config.maxheight+'px');}else{p.set(this._scrollableElems.root,'width','');p.set(this._scrollableElems.content,'width','');if(q.ie()<=7){p.set(this._scrollableElems.root,'width',this._scrollableElems.content.offsetWidth+'px');}else p.set(this._scrollableElems.root,'width',this._scrollableElems.content.offsetWidth+'px');this._scrollableArea.resize();}this.focusAnItem();},onHide:function(){this.blur();},focusAnItem:function(){return this._attemptFocus(0,1);},blur:function(){if(this._focused){this._focused.blur();this._focused=null;this.inform('blur');}},handleKeydown:function(u,v){var w=this._items.indexOf(this._focused);switch(u){case l.UP:case l.DOWN:var x=u===l.UP?-1:1;if(w!==-1){return this._attemptFocus(w+x,x);}else if(u===l.UP){return this._attemptFocus(this._items.length-1,-1);}else return this._attemptFocus(0,1);break;case l.SPACE:if(this._items.indexOf(this._focused)!==-1){this._handleItemClick(this._focused,v);return true;}return false;default:var y=String.fromCharCode(u).toLowerCase(),z;for(var aa=w+1;aa<this._items.length;aa++){z=this._items[aa].getAccessKey();if(z&&z.charAt(0).toLowerCase()===y)if(this._focusItem(this._items[aa]))return true;}return false;}},_render:function(){this._ul=j.create('ul',{className:"_54nf"});this._ul.setAttribute('role','menu');this._items.forEach(function(w){this._insertItem(w,null);}.bind(this));k.listen(this._ul,'click',this._handleClick.bind(this));k.listen(this._ul,'mouseover',this._handleMouseOver.bind(this));k.listen(this._ul,'mouseout',this._handleMouseOut.bind(this));var u=this._ul;if(this._config.maxheight){this._scrollableElems=o.renderDOM();j.setContent(this._scrollableElems.content,this._ul);u=this._scrollableElems.root;}var v="_54nq"+(this._config.className?' '+this._config.className:'')+(this._theme.className?' '+this._theme.className:'');this._root=j.create('div',{className:v},j.create('div',{className:"_54ng"},u));this._config.id&&this._root.setAttribute('id',this._config.id);this.inform('rendered',this._root);},_needsDefaultBehavior:function(u){if(u.isDefaultRequested&&u.isDefaultRequested()){var v=m.byTag(u.getTarget(),'a'),w=v&&v.getAttribute('href');return w&&w[0]!=='#';}return false;},_handleClick:function(u){if(!this._needsDefaultBehavior(u)){var v=this._getItemInstance(u.getTarget());if(v)return this._handleItemClick(v,u);}},_handleItemClick:function(u,v){this.inform('itemclick',{item:u,event:v});if(u.hasAction())this.done();return u.handleClick();},_handleMouseOver:function(u){var v=this._getItemInstance(u.getTarget());v&&this._focusItem(v,true);},_handleMouseOut:function(u){var v=this._getItemInstance(u.getTarget());if(v&&this._focused===v)this.blur();},_insertItem:function(u,v,w){var x=u.getRoot();g.addClass(x,'__MenuItem');i.set(x,'MenuItem',u);if(v){var y=w?j.insertAfter:j.insertBefore;y(v.getRoot(),x);}else j.appendContent(this._ul,x);},_attemptFocus:function(u,v){var w=this.getItemAt(u);if(w)if(this._focusItem(w)){return true;}else return this._attemptFocus(u+v,v);return false;},_focusItem:function(u,v){if(u.focus(v)!==false){if(this._focused!==u){this.blur();this._focused=u;this.inform('focus');}return true;}return false;},_getItemInstance:function(u){var v=m.byClass(u,'__MenuItem');return v?i.get(v,'MenuItem'):null;}});e.exports=t;});
__d("MenuItemInterface",["copyProperties","emptyFunction"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('emptyFunction');function i(){}g(i.prototype,{_root:null,getRoot:function(){if(!this._root)this._root=this.render();return this._root;},render:h,getAccessKey:h,hasAction:h.thatReturnsFalse,focus:h.thatReturnsFalse,blur:h.thatReturnsFalse,handleClick:h.thatReturnsFalse});e.exports=i;});
__d("MenuItemBase",["Class","DOM","HTML","MenuItemInterface","copyProperties","cx"],function(a,b,c,d,e,f){var g=b('Class'),h=b('DOM'),i=b('HTML'),j=b('MenuItemInterface'),k=b('copyProperties'),l=b('cx');function m(n){this.parent.construct(this);this._data=n;}g.extend(m,j);k(m.prototype,{render:function(){var n="_54ni";if(this._data.className)n+=' '+this._data.className;var o={className:n,'aria-selected':'false'};for(var p in this._data)if(p.indexOf('data-')===0)o[p]=this._data[p];return h.create('li',o,this._renderItemContent());},_renderItemContent:function(){return i(this._data.markup).getNodes();}});e.exports=m;});
__d("MenuItem",["ReactDOM","Class","CSS","DOM","MenuItemBase","React","copyProperties","cx","emptyFunction","startsWith"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('Class'),i=b('CSS'),j=b('DOM'),k=b('MenuItemBase'),l=b('React'),m=b('copyProperties'),n=b('cx'),o=b('emptyFunction'),p=b('startsWith');function q(r){this.parent.construct(this,r);}h.extend(q,k);m(q.prototype,{getValue:function(){return this._data.value;},getAccessKey:function(){return this._data.label&&this._data.label.charAt(0);},hasAction:o.thatReturnsTrue,focus:function(r){if(!this._root.offsetParent)return false;i.addClass(this._root,"_54ne");i.addClass(this._root,'selected');this._root.setAttribute('aria-selected','true');r||this._anchor.focus();},blur:function(){i.removeClass(this._root,"_54ne");i.removeClass(this._root,'selected');this._root.setAttribute('aria-selected','false');},handleClick:function(){if(typeof this._onclickHandler==='function')return this._onclickHandler();return !!((this._data.rel&&this._data.rel!=='ignore')||this._data.href);},setOnClickHandler:function(r){this._onclickHandler=r;},_renderItemContent:function(){this._anchor=j.create('a',{className:"_54nc"});if(this._data.reactChildren){l.renderComponent(g.span({className:"_54nh"},this._data.reactChildren),this._anchor);this._data.label=this._anchor.innerText||this._anchor.textContent;}else j.setContent(this._anchor,j.create('span',{className:"_54nh"},this._data.markup||this._data.label));if(this._data.icon){j.prependContent(this._anchor,this._data.icon);i.addClass(this._anchor,"_54nu");}this._anchor.setAttribute('href',this._data.href||'#');if(this._data.rel){this._anchor.setAttribute('rel',this._data.rel);}else if(!this._data.href)this._anchor.setAttribute('rel','ignore');if(this._data.ajaxify)this._anchor.setAttribute('ajaxify',this._data.ajaxify);if(this._data.target)this._anchor.setAttribute('target',this._data.target);for(var r in this._data)if(typeof r==='string'&&p(r,'data-'))this._anchor.setAttribute(r,this._data[r]);this._anchor.setAttribute('role','menuitem');this._anchor.setAttribute('title',this._data.title);return this._anchor;}});e.exports=q;});
__d("MenuSelectableItem",["Class","CSS","MenuItem","copyProperties","cx"],function(a,b,c,d,e,f){var g=b('Class'),h=b('CSS'),i=b('MenuItem'),j=b('copyProperties'),k=b('cx');function l(m){this.parent.construct(this,m);this._selected=!!this._data.selected;}g.extend(l,i);j(l.prototype,{_selected:false,getLabel:function(){return this._data.label;},getIcon:function(){return this._data.icon;},isSelected:function(){return this._selected;},select:function(){h.addClass(this._root,"_54nd");this._selected=true;},deselect:function(){h.removeClass(this._root,"_54nd");this._selected=false;},render:function(){var m=this.parent.render();if(this._data.selected)h.addClass(m,"_54nd");return m;}});e.exports=l;});
__d("SelectableMenu",["Class","Menu","arrayContains","copyProperties","createArrayFrom"],function(a,b,c,d,e,f){var g=b('Class'),h=b('Menu'),i=b('arrayContains'),j=b('copyProperties'),k=b('createArrayFrom');function l(o,p){this.parent.construct(this,o,p);}function m(o){return o.select&&o.deselect&&o.isSelected;}function n(o){return m(o)&&o.isSelected();}g.extend(l,h);j(l.prototype,{focusAnItem:function(){for(var o=0;o<this._items.length;o++)if(n(this._items[o]))if(this._focusItem(this._items[o])!==false)return true;return this.parent.focusAnItem();},setValue:function(o){if(!this._root)this._render();var p=k(o);this._items.forEach(function(q){if(m(q))if(i(p,q.getValue())){q.select();}else if(n(q))q.deselect();});this.inform('change',this._getSelection());},_handleItemClick:function(o,p){if(!m(o))return this.parent._handleItemClick(o,p);this.inform('itemclick',{item:o,event:p});if(this._config.multiple){if(n(o)){o.deselect();}else o.select();this.inform('change',this._getSelection());}else{if(!n(o)){o.select();this._items.forEach(function(q){if(n(q)&&q!==o)q.deselect();});this.inform('change',this._getSelection());}this.done();}return o.handleClick();},_getSelection:function(){var o=[];this._items.forEach(function(p){if(n(p))o.push({label:p.getLabel(),value:p.getValue(),item:p});});if(!this._config.multiple)o=o[0];return o;}});e.exports=l;});
__d("Selector",["ArbiterMixin","BehaviorsMixin","DOM","DOMQuery","copyProperties","csx"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('BehaviorsMixin'),i=b('DOM'),j=b('DOMQuery'),k=b('copyProperties'),l=b('csx');function m(n,o,p,q){this._button=n;this._menu=o;this._input=p;this.init();q.behaviors&&this.enableBehaviors(q.behaviors);}k(m.prototype,g,h);k(m.prototype,{init:function(){this._menu.subscribe('change',function(n,o){this._setLabelContent(o.label);this._input.value=o.value;this.inform('change',o);}.bind(this));},_setLabelContent:function(n){var o=j.find(this._button,"span._55pe");i.setContent(o,n);},setValue:function(n){this._menu.setValue(n);},getValue:function(){return this._input.value;},getName:function(){return this._input.name;},getButton:function(){return this._button;}});e.exports=m;});