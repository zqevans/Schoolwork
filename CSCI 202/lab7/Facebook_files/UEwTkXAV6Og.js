/*1369013568,178142511*/

if (self.CavalryLogger) { CavalryLogger.start_js(["yv1as"]); }

__d("ads-currencyMap",[],function(a,b,c,d,e,f){var g={ARS:["{symbol} {amount}","$",100],AUD:["{symbol}{amount}","$",100],BOB:["{symbol} {amount}","$b",100],BRL:["{symbol} {amount}","R$",100],GBP:["{symbol}{amount}","\u00a3",100],CAD:["{symbol}{amount}","$",100],CLP:["{symbol} {amount}","$",1],CNY:["{amount} {symbol}","\uffe5",100],COP:["{symbol} {amount}","$",1],CRC:["{symbol}{amount}","\u20a1",1],CZK:["{amount} {symbol}","K\u010d",100],DKK:["{symbol} {amount}","DKK",100],EUR:["{symbol} {amount}","\u20ac",100],GTQ:["{symbol}{amount}","Q",100],HNL:["{symbol} {amount}","L.",100],HKD:["{symbol}{amount}","$",100],HUF:["{amount} {symbol}","Ft",1],ISK:["{amount} {symbol}","kr.",1],INR:["{symbol} {amount}","\u0930\u0941",100],IDR:["{symbol}{amount}","Rp",1],ILS:["{symbol} {amount}","\u20aa",100],JPY:["{symbol}{amount}","\u00a5",1],KRW:["{symbol}{amount}","\u20a9",1],MOP:["{symbol}{amount}","MOP",100],MYR:["{symbol}{amount}","R",100],MXN:["{symbol}{amount}","$",100],NZD:["{amount}{symbol}","$",100],NIO:["{symbol} {amount}","C$",100],NOK:["{symbol} {amount}","NOK",100],PYG:["{symbol} {amount}","Gs",1],PEN:["{symbol} {amount}","S\/.",100],PHP:["{symbol}{amount}","Php",100],PLN:["{amount} {symbol}","z\u0142",100],QAR:["{amount} {symbol}","\u0631.\u0642.",100],RON:["{amount} {symbol}","lei",100],RUB:["{amount}{symbol}","RUB",100],SAR:["{amount} {symbol}","\u0631.\u0633.",100],SGD:["{symbol}{amount}","$",100],ZAR:["{symbol} {amount}","R",100],SEK:["{amount} {symbol}","kr",100],CHF:["{symbol} {amount}","CHF",100],TWD:["{symbol}{amount}","NT$",1],THB:["{symbol}{amount}","\u0e3f",100],TRY:["{amount} {symbol}","TL",100],AED:["{amount} {symbol}","\u062f.\u0625.",100],USD:["{symbol}{amount}","$",100],UYU:["{symbol} {amount}","$U",100],VEF:["{symbol} {amount}","Bs",100],VND:["{amount} {symbol}","\u20ab",1]};function h(m){if(g[m])return g[m][0];return null;}function i(m){if(g[m])return g[m][1];return null;}function j(m){if(g[m])return 1*g[m][2];return 1;}var k=[];for(var l in g)if(g.hasOwnProperty(l))k.push(l);f.getFormat=h;f.getSymbol=i;f.getOffset=j;f.currencyMapKeys=k;});
__d("ads-lib-formatters",["ads-currencyMap"],function(a,b,c,d,e,f){var g=b('ads-currencyMap'),h='USD';function i(t,u,v){t=t||'';v=v||'';u=typeof u==='undefined'?t.length:u;return t.length>u?(t.substr(0,u-v.length)+v):t;}function j(t,u){if(u===undefined||u===null)u='';return function(v){return !v?u:i(v,t,'...');};}function k(t,u,v,w){if(t==='N/A')return t;t=t||0;v=v||'';w=w||'.';var x='',y=/(\d)(\d\d\d)($|\D)/,z='$1'+v+'$2$3';if(u!=null)t=l(t,u);t=(''+t).replace('.',w);while((x=t.replace(y,z))!=t)t=x;return t;}function l(t,u){var v=Math.pow(10,u);t=Math.round(t*v)/v+'';if(!u)return t;var w=t.indexOf('.'),x=0;if(w==-1){t+='.';x=u;}else x=u-(t.length-w-1);for(var y=0,z=x;y<z;y++)t+='0';return t;}function m(t){return function(u){return k(u,t||0,',','.');};}function n(t){return function(u){return k(u*100,t||0,',','.')+'%';};}var o={};function p(t,u,v){if(t===undefined)t=2;if(v===undefined)v=false;u=u||h;var w=u+'-'+t+'-'+v;if(!o[w]){var x=g.getFormat(u)||g.getFormat(h),y=g.getSymbol(u)||g.getSymbol(h),z=g.getOffset(u)||g.getOffset(h);x=x.replace('{symbol}',y);o[w]=function(aa){if(v)aa=aa/z;if(!(aa+'').match(/^\-?[\d\.,]*$/))return 'N/A';var ba=k(aa,t,',','.');return x.replace('{amount}',ba);};}return o[w];}function q(t){t=(t+'').trim().replace(/^[^\d]*\-/,'\u0002');if(!((/^\u0002?(\d+,\d*){2,}$/.test(t))||(/^\u0002?(\d+\.\d*){2,}$/.test(t))))t=t.replace(/[\.,](\d*\D*)$/,'\u0001$1');t=t.replace(/[^0-9\u0001\u0002]/g,'').replace('\u0001','.').replace('\u0002','-');return +t||0;}function r(){return function(t){return k(t,0,',','.')+'%';};}function s(t){var u=t.currency(),v=t.offset()==100?2:0;return p(v,u);}f.createTextTruncator=j;f.chopString=i;f.parseNumber=q;f.formatNumber=k;f.createNumberFormatter=m;f.createPercentFormatter=n;f.createMoneyFormatter=p;f.createMoneyFormatterForAccount=s;f.createInflationFormatter=r;});
__d("PopoverMenuShowOnHover",["Event","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('copyProperties');function i(j){this._popoverMenu=j;this._listeners=[];}h(i.prototype,{enable:function(){this._attachMouseListeners(this._popoverMenu.getTriggerElem());this._setMenuSubscription=this._popoverMenu.subscribe('setMenu',this._onSetMenu.bind(this));},disable:function(){while(this._listeners.length)this._listeners.pop().remove();if(this._setMenuSubscription){this._setMenuSubscription.unsubscribe();this._setMenuSubscription=null;}},_onSetMenu:function(){this._attachMouseListeners(this._popoverMenu.getMenu().getRoot());},_attachMouseListeners:function(j){var k=this._popoverMenu.getPopover();this._listeners.push(g.listen(j,'mouseenter',k.showLayer.bind(k)),g.listen(j,'mouseleave',k.hideLayer.bind(k)));}});e.exports=i;});
__d("ScrollingPager",["Arbiter","copyProperties","CSS","OnVisible","UIPagelet","$","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('copyProperties'),i=b('CSS'),j=b('OnVisible'),k=b('UIPagelet'),l=b('$'),m=b('ge'),n={};function o(p,q,r,s){this.scroll_loader_id=p;this.pagelet_src=q;this.data=r;this.options=s||{};if(this.options.target_id){this.target_id=this.options.target_id;this.options.append=true;}else this.target_id=p;this.handler=null;}h(o,{REGISTERED:'ScrollingPager/registered',getInstance:function(p){return n[p];}});h(o.prototype,{setBuffer:function(p){this.options.buffer=p;this.onvisible&&this.onvisible.setBuffer(p);},getBuffer:function(){return this.options.buffer;},register:function(){this.onvisible=new j(l(this.scroll_loader_id),this.getHandler(),false,this.options.buffer);n[this.scroll_loader_id]=this;g.inform(o.REGISTERED,{id:this.scroll_loader_id});},getInstance:function(p){return n[p];},getHandler:function(){if(this.handler)return this.handler;function p(q){var r=m(this.scroll_loader_id);if(!r){this.onvisible.remove();return;}i.addClass(r.firstChild,'async_saving');var s=this.options.handler;this.options.handler=function(){g.inform('ScrollingPager/loadingComplete');s&&s.apply(null,arguments);};if(q)this.data.pager_fired_on_init=true;k.loadFromEndpoint(this.pagelet_src,this.target_id,this.data,this.options);}return p.bind(this);},setHandler:function(p){this.handler=p;},removeOnVisible:function(){this.onvisible.remove();},checkBuffer:function(){this.onvisible&&this.onvisible.checkBuffer();}});e.exports=o;});
__d("StickyController",["Event","CSS","Style","Vector","copyProperties","queryThenMutateDOM"],function(a,b,c,d,e,f){var g=b('Event'),h=b('CSS'),i=b('Style'),j=b('Vector'),k=b('copyProperties'),l=b('queryThenMutateDOM');function m(n,o,p,q){this._element=n;this._marginTop=o;this._onchange=p;this._proxy=q||n.parentNode;this._boundQueryOnScroll=this._queryOnScroll.bind(this);this._boundMutateOnScroll=this._mutateOnScroll.bind(this);}k(m.prototype,{handleScroll:function(){l(this._boundQueryOnScroll,this._boundMutateOnScroll);},_queryOnScroll:function(){this._shouldFix=j.getElementPosition(this._proxy,'viewport').y<=this._marginTop;},_mutateOnScroll:function(){var n=this._shouldFix;if(this.isFixed()!==n){i.set(this._element,'top',n?this._marginTop+'px':'');h.conditionClass(this._element,'fixed_elem',n);this._onchange&&this._onchange(n);}},start:function(){if(this._event)return;this._event=g.listen(window,'scroll',this.handleScroll.bind(this));this.handleScroll.bind(this).defer();},stop:function(){this._event&&this._event.remove();this._event=null;},isFixed:function(){return h.hasClass(this._element,'fixed_elem');}});e.exports=m;});
__d("tidyEvent",["Run"],function(a,b,c,d,e,f){var g=b('Run'),h=[];function i(){while(h.length){var k=h.shift();if(k.remove){k._handler&&k.remove();}else k&&k.unsubscribe();}}function j(k){if(!h.length)g.onLeave(i);if(Array.isArray(k)){h=h.concat(k);}else h.push(k);return k;}e.exports=j;});
__d("TriggerablePageletLoader",["function-extensions","CSS","Event","OnVisible","Run","UIPagelet","copyProperties"],function(a,b,c,d,e,f){b('function-extensions');var g=b('CSS'),h=b('Event'),i=b('OnVisible'),j=b('Run'),k=b('UIPagelet'),l=b('copyProperties'),m=[];function n(p){if(!m[p])return;m[p].__trigger&&m[p].__trigger.remove();delete m[p];}function o(p,q){this._disabledTriggerKeys=[];this._pageletConfig=p;this._loaded=false;this._loading=false;this._triggerKeys=[];if(q)q.forEach(this.addTrigger.bind(this));j.onLeave(this.destroy.bind(this));}l(o,{removeTrigger:function(p){for(var q in m)if(m[q]&&m[q].node===p)n(q);},TRIGGER_CLICK:'click',TRIGGER_ONVISIBLE:'onvisible',TRIGGER_NOW:'now'});l(o.prototype,{addTrigger:function(p){p.__trigger=this._createTrigger(p);m.push(p);this._triggerKeys.push(m.length-1);},destroy:function(){this.removeTriggers();if(this._pageletRequest){this._pageletRequest.cancel();this._pageletRequest=null;this._loading=false;this._loaded=false;}},disableTriggers:function(){this._triggerKeys.forEach(function(p){if(m[p]){m[p].__trigger.remove();this._disabledTriggerKeys.push(p);}}.bind(this));},enableTriggers:function(){if(this._loaded||this._loading)return;this._disabledTriggerKeys.forEach(function(p){if(m[p])m[p].__trigger=this._createTrigger(m[p]);}.bind(this));this._disabledTriggerKeys.length=0;},_createTrigger:function(p){if(this._loaded||this._loading)return;var q=this.onTrigger.bind(this,p);switch(p.type){case o.TRIGGER_CLICK:return h.listen(p.node,'click',function(r){r.prevent();q();});case o.TRIGGER_ONVISIBLE:return new i(p.node,q,p.onVisibleStrict,p.onVisibleBuffer);case o.TRIGGER_NOW:return q();default:}},load:function(p){if(this._loaded||this._loading)return;this._loading=true;this._loaded=false;g.addClass(this._pageletConfig.node,'async_saving');if(p&&p.node)g.addClass(p.node,'async_saving');var q=this._pageletConfig.options||{};q.displayCallback=this.onLoad.bind(this,p);if(q.crossPage===undefined)q.crossPage=true;this._pageletRequest=k.loadFromEndpoint(this._pageletConfig.controller,this._pageletConfig.node,this._pageletConfig.data,q);},onLoad:function(p,q){this._loaded=true;this._pageletRequest=null;g.removeClass(this._pageletConfig.node,'async_saving');if(p&&p.node)g.removeClass(p.node,'async_saving');if(this._pageletConfig.displayCallback){this._pageletConfig.displayCallback(q);}else q();},onTrigger:function(p){p.callback&&p.callback(p);if(!this._loaded&&!this._loading)this.load(p);},removeTriggers:function(p){this._triggerKeys.forEach(function(q){if(m[q]&&(!p||m[q].type===p))n(q);});}});e.exports=o;});
__d("OGCollectionAddCuration",["AsyncRequest","DataStore","DOM","copyProperties","tidyEvent"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('DataStore'),i=b('DOM'),j=b('copyProperties'),k=b('tidyEvent'),l='OGCollectionAddCuration';function m(n,o,p,q,r,s){this._container=n;this._control=o;this._itemID=p;this._surface=r;this._display=s.display;if(o)k([o.subscribe('reload',this.reloadControl.bind(this))]);if(q)h.set(String(q),l,this);if(p)h.set(String(p),l,this);}j(m,{handleDeleteAction:function(n){var o=h.get(String(n),l);if(o)o.reloadControl();},handleAddItemSuccess:function(n,o,p){var q=h.get(String(n),l);h.set(String(o),l,q);q.insertMenuIntoDialog(p);},hideControl:function(n){var o=h.get(String(n),l);o.hideControl();},insertControl:function(n,o){var p=h.get(String(n),l);p.replaceControl(o);},reloadControl:function(n){var o=h.get(String(n),l);o.reloadControl();}});j(m.prototype,{hideControl:function(){this._control.hide();},reloadControl:function(){var n=new g('/ajax/collections/add_curation').setData({itemid:this._itemID,surface:this._surface,forceedit:true,display:this._display}).setHandler(this._handleAddCurationResponse.bind(this));n.send();},insertMenuIntoDialog:function(n){this._control.insertMenuIntoDialog(n);},replaceControl:function(n){i.replace(this._container,n);},_handleAddCurationResponse:function(n){this._control.destroy();i.replace(this._container,n.payload);}});e.exports=m;});
__d("OGCollectionAddDialog",["AsyncRequest","DataStore","DOMQuery","Form","MenuDeprecated","URI","collectDataAttributes","copyProperties","csx","tidyEvent"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('DataStore'),i=b('DOMQuery'),j=b('Form'),k=b('MenuDeprecated'),l=b('URI'),m=b('collectDataAttributes'),n=b('copyProperties'),o=b('csx'),p=b('tidyEvent'),q='OGCollectionAddDialog';function r(s,t,u,v,w){this._dialog=s;this._surface=t;this._endpoint=l(v);this._loadEditMenu=w.loadEditMenu;this._listener=h.get(String(u),q);this._audienceSelector=i.find(this._dialog.getContent(),'.audienceSelector');this._menu=i.find(this._dialog.getContent(),"._4-jt");k.register(this._menu);this._menuSubscriptionToken=k.subscribe('select',this._onMenuClick.bind(this));p([this._dialog.subscribe('show',this._onDialogShow.bind(this)),this._dialog.subscribe('hide',this._onDialogHide.bind(this))]);this._dialog.show();}n(r,{INSTANCE_KEY:q});n(r.prototype,{_onDialogShow:function(){this._listener.onDialogShow(this._dialog);},_onDialogHide:function(){this._destroy();},_onMenuClick:function(s,t){if(t.menu!==this._menu)return;var u=t.item;this._listener.onMenuClick(u);var v=i.find(u,"._5581"),w=v.getAttribute('value');this._submitRequest(w);},_submitRequest:function(s){this._endpoint.addQueryData({collection_token:s});this._dialog.hide();this._request=new g(this._endpoint).setData(n(j.serialize(this._audienceSelector),{action:'add',load_edit_menu:this._loadEditMenu,surface:this._surface},m(this._dialog.getContext(),['ft']))).setHandler(function(){this._listener.onAddSuccess();}.bind(this));this._request.send();},_destroy:function(){this._listener.onDialogHide();k.unsubscribe(this._menuSubscriptionToken);}});e.exports=r;});
__d("OGCollectionAddMenu",["CSS","DataStore","DOM","DOMQuery","Event","OGCollectionAddDialog","Parent","TidyArbiterMixin","copyProperties","csx","cx","tidyEvent"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DataStore'),i=b('DOM'),j=b('DOMQuery'),k=b('Event'),l=b('OGCollectionAddDialog'),m=b('Parent'),n=b('TidyArbiterMixin'),o=b('copyProperties'),p=b('csx'),q=b('cx'),r=b('tidyEvent');function s(t,u,v,w,x,y){this._image=u;this._container=v;this._placeholder=w;this._surface=x;this._showPlaceholder=y.showPlaceholder;this._rateControl=i.scry(this._container.parentNode,"._5586")[0];s.inform('addButton',{button:this._image,root:this._container});r(k.listen(this._container,'click',function(z){var aa=m.byClass(z.getTarget(),"_5859");if(this.isDialogShowing()&&aa)z.kill();}.bind(this)));if(g.hasClass(this._image,"_52uz"))r(k.listen(this._container,'mouseenter',k.fire.curry(this._container,'click')));h.set(String(t),l.INSTANCE_KEY,this);}o(s,n);o(s.prototype,n,{destroy:function(){i.remove(this._container);this._placeholder.destroy();},hide:function(){g.hide(this._container);this._placeholder.hide();},getParent:function(){return this._container.parentNode;},insertMenuIntoDialog:function(t){this._placeholder.insertIntoDialog(t);},onMenuClick:function(t){var u=j.find(t,"._5582");this._showRate=this._rateControl&&u.getAttribute('value');g.hide(this._image);if(this._showRate){g.show(this._rateControl);k.fire(this._rateControl,'click');}else if(this._showPlaceholder)g.show(this._placeholder.getIcon());},onAddSuccess:function(){if(!this._showPlaceholder&&!this._showRate)this.inform('reload');},onDialogShow:function(t){var u=j.find(t.getContent(),'.audienceSelector');g.addClass(this._image,'openToggler');s.inform('menuOpened',{audienceSelector:u.parentNode});this._dialogShowing=true;},onDialogHide:function(){g.removeClass(this._image,'openToggler');this._dialogShowing=false;},isDialogShowing:function(){return this._dialogShowing;}});e.exports=s;});
__d("TimelineSection",["Arbiter","DOMScroll","DoublyLinkedListMap","Run","TidyArbiterMixin","copyProperties","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('DOMScroll'),i=b('DoublyLinkedListMap'),j=b('Run'),k=b('TidyArbiterMixin'),l=b('copyProperties'),m=b('ge'),n=null;function o(){n=null;}function p(q,r,s){this.id=q;this.label=s;this.nodeID=r;this._parentSection=null;this.childSections=new i();this._isLoaded=false;p.inform.bind(p,'sectionInitialized/'+q,{section:this},g.BEHAVIOR_STATE).defer();}l(p,k,{callWithSection:function(q,r){this.subscribe('sectionInitialized/'+q,function(s,t){r(t.section);});},setActiveSectionID:function(q){!n&&j.onLeave(o);n=q;}});l(p.prototype,{appendSection:function(q){this.childSections.append(q.id,q);q._parentSection=this;},freeze:function(){this.freezeChildren();},freezeChildren:function(){var q=this.childSections.getHead();while(q){!q.isActive()&&q.freeze();q=q.getNext();}},getNext:function(){return this._parentSection&&this._parentSection.childSections.getNext(this.id);},getPrev:function(){return this._parentSection&&this._parentSection.childSections.getPrev(this.id);},isActive:function(){var q=this;while(q){if(q.id===n)return true;q=q._parentSection;}return false;},isLoaded:function(){return this._isLoaded;},setIsLoaded:function(q){this._isLoaded=q;return this;},scrollTo:function(){if(!m(this.nodeID))return;h.scrollTo(this.getNode(),true,false,false,h.scrollTo.bind(this).curry(this.getNode(),0));},thaw:function(){this.thawChildren();},thawChildren:function(){var q=this.childSections.getHead();while(q){q.thaw();q=q.getNext();}}});e.exports=p;});
__d("OGCollectionAddObject",["AsyncRequest","CSS","DOM","DOMQuery","Form","JSLogger","Parent","TidyArbiterMixin","TimelineSection","copyProperties","csx","cx","ge"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('DOMQuery'),k=b('Form'),l=b('JSLogger'),m=b('Parent'),n=b('TidyArbiterMixin'),o=b('TimelineSection'),p=b('copyProperties'),q=b('csx'),r=b('cx'),s=b('ge'),t=l.create('og_collection_add_object'),u=p({ADD_PLACEHOLDER:'OGCollectionAddObject/addPlaceholder',NEW_ITEM:'OGCollectionAddObject/newItem',PLACEHOLDER:'OGCollectionAddObject/placeholder',REMOVE_PLACEHOLDER:'OGCollectionAddObject/removePlaceholder',init:function(v,w,x,y,z){o.callWithSection(z,function(aa){this.initImpl(v,w,x,y,aa.getNode(),z,aa.id);}.bind(this));},initInReport:function(v,w,x,y){var z=m.byClass(y,"_w8_");this.initImpl(v,w,x,y,z,null,null);},initImpl:function(v,w,x,y,z,aa,ba){var ca=j.scry(z,"._620")[0];if(!ca){t.error('grid_not_found',{collection_id:aa,section:ba,csx:'.public/fbTimelineCollectionGrid/root'});return;}w.subscribe('select',function(da,ea){if(!ea.selected.uid||ea.selected.type.indexOf('disabled')!=-1)return;u.inform(u.ADD_PLACEHOLDER,aa);var fa=ca.nextSibling,ga=null;if(fa&&h.hasClass(fa,"_3t3")){h.hide(ca.lastChild);ga=ca.lastChild;}var ha=i.prependContent(ca,x.cloneNode(true))[0];u.inform(u.PLACEHOLDER,{grid:ca});var ia=p({action:'add',mechanism:'typeahead'},k.serialize(y));ha.setAttribute('data-item',ia.item_id);new g().setURI(v).setData(ia).setRelativeTo(ca).setErrorHandler(function(ja){i.remove(ha);u.inform(u.REMOVE_PLACEHOLDER,aa);ga&&h.show(ga);}).setHandler(function(ja){ga&&i.remove(ga);}).setFinallyHandler(function(ja){u.inform(u.PLACEHOLDER,{grid:ca});}).send();});},replaceItem:function(v,w,x){var y=i.scry(v,'div[data-obj="'+w+'"]')[0];if(y){var z=m.byClass(y,"_30f");if(z)u.inform(u.REMOVE_PLACEHOLDER,z.id);i.remove(y.parentNode);}var aa=i.find(v,'[data-item="'+w+'"]'+"._gx9");i.replace(aa,x);this.inform(u.NEW_ITEM,{grid:v,newItem:x});},prependItem:function(v,w){var x=j.scry(s(v),"._620")[0];i.prependContent(x,w);this.inform(u.NEW_ITEM,{grid:x,newItem:w});}},n);e.exports=u;});
__d("OGCollectionBatchAddCuration",["AsyncRequest","Event","OGCollectionAddCuration","Parent","Run"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Event'),i=b('OGCollectionAddCuration'),j=b('Parent'),k=b('Run'),l={},m;function n(p){for(var q=0;q<l[p].listeners.length;q++)l[p].listeners[q].remove();l[p]=null;}var o={loadControls:function(p,q,r){if(!q||!Array.isArray(q))return;l[r]=l[r]||{tokens:[],listeners:[]};l[r].tokens=l[r].tokens.concat(q);var s=j.byClass(p,'fbTimelineUnit');l[r].listeners.push(h.listen(s,'mouseenter',function(){new g('/ajax/collections/batch_add_curation').setData({collectionitemtokens:l[r].tokens.join(),surface:r}).send();n(r);}));if(!m){m=true;k.onLeave(function(){for(var t in l)l[t]&&n(t);l={};m=null;});}},attachControls:function(p,q){for(var r=0;r<p.length;r++)i.insertControl(p[r],q[r]);}};e.exports=o;});
__d("BrokenProfilePicLogger",["Run","DOM","JSLogger"],function(a,b,c,d,e,f){var g=b("Run"),h=b("DOM"),i=b("JSLogger"),j=i.create("entities_profile_pics"),k={checkAndLog:function(l){g.onAfterLoad(function(){var m=h.find(l.parentNode,'img');if(!m.complete||(typeof m.naturalWidth!="undefined"&&m.naturalWidth===0))j.log('broken_link',{src:m.getAttribute('src')});});}};e.exports=k;});
__d("MedleyPageletRequestData",["Arbiter","TidyArbiter"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('TidyArbiter'),i={},j={get:function(){return i;},set:function(k){i=k;h.inform('Medley/requestDataSet',null,g.BEHAVIOR_STATE);}};e.exports=j;});
__d("TimelineDynamicSection",["Class","DOM","TimelineSection","copyProperties","cx","ge","TimelineDynamicSectionConfig"],function(a,b,c,d,e,f){var g=b('Class'),h=b('DOM'),i=b('TimelineSection'),j=b('copyProperties'),k=b('cx'),l=b('ge'),m=b('TimelineDynamicSectionConfig');function n(o,p,q){this._controller=p;this._data=null;this._node=null;this._triggerLoader=null;this.parent.construct(this,o,o,q);}g.extend(n,i);j(n.prototype,{_createNode:function(){return h.create('div',{className:"_30f",id:this.nodeID},[m.throbber.cloneNode(true)]);},getNode:function(){if(!this._node)this._node=l(this.nodeID)||this._createNode();return this._node;}});e.exports=n;});
__d("TimelineAppCollection",["function-extensions","Class","CSS","DOM","DOMQuery","Event","MedleyPageletRequestData","NumberFormatConfig","PageTransitions","Parent","Style","TidyArbiter","TidyArbiterMixin","TimelineDynamicSection","TimelineSection","TriggerablePageletLoader","TimelineDynamicSectionConfig","copyProperties","csx","cx","ads-lib-formatters","ge"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Class'),h=b('CSS'),i=b('DOM'),j=b('DOMQuery'),k=b('Event'),l=b('MedleyPageletRequestData'),m=b('NumberFormatConfig'),n=b('PageTransitions'),o=b('Parent'),p=b('Style'),q=b('TidyArbiter'),r=b('TidyArbiterMixin'),s=b('TimelineDynamicSection'),t=b('TimelineSection'),u=b('TriggerablePageletLoader'),v=b('TimelineDynamicSectionConfig'),w=b('copyProperties'),x=b('csx'),y=b('cx'),z=b('ads-lib-formatters'),aa=b('ge'),ba=500,ca=8;function da(ha){var ia=aa(ga.getIDByToken(ha));if(!ia)return;return i.scry(ia,"._620")[0];}function ea(ha){var ia=ha._parentSection,ja=ia._parentSection;t.setActiveSectionID(ia.id);ia.setActiveCollection(ha);if(ia._sk===ja._sk){if(!h.hasClass(ja.getNode(),"_c4f")){h.addClass(ja.getNode(),"_c4f");ja.freezeChildren();}ha._isFullyLoaded&&ja.addSectionTeasers();}if(!ja.isMedleyView()&&ia._sk===ja._sk){var ka=n.getCurrentURI();ka.addQueryData({collection_token:ha._token});if(ha._order){ka.addQueryData({order:ha._order});}else ka.removeQueryData('order');ka.removeQueryData(['next_cursor']);n.rewriteCurrentURI(n.getCurrentURI().getUnqualifiedURI(),ka);}}function fa(ha,ia){ia.data.overview=ha._parentSection._sk!==ha._parentSection._parentSection._sk;ea(ha);}function ga(ha,ia,ja,ka,la){this._contentLoader=null;this._isFrozen=false;this._isFullyLoaded=false;this._cursor=0;this._tabNode=ja;this._tabCount=ka>0?ka:0;this._token=ha;this._ftid=null;this.auxContent=null;this.curationContent=null;this._order=la;this._sortContent=null;this.refreshCount();this.parent.construct(this,ga.getIDByToken(ha),ia);if(!ja)return;if(aa(this.nodeID)){k.listen(ja,'click',ea.curry(this));}else this.createTriggerLoader.bind(this).defer();}g.extend(ga,s);w(ga,r,{NEW_ITEM:'TimelineAppCollection/newItem',addPlaceholderToCollection:function(ha,ia,ja){ja=typeof ja!=='undefined'?ja:{};if(!ja.suppressCount)this.incrementCount(ga.getIDByToken(ha));t.callWithSection(ga.getIDByToken(ha),function(ka){var la=da(ha),ma=i.scry(ia,"._gx7")[0].cloneNode(true),na=i.scry(ia,"._gx8 .img")[0],oa=i.scry(ia,"._3owb")[0],pa=oa&&oa.getAttribute('data-obj');if(!ma||!pa||!la)return;var qa=i.scry(la,'[data-obj="'+pa+'"]')[0],ra=i.create('div',{className:"_4-he"});if(na)p.set(ra,'background-image','url('+na.src+')');var sa=i.create('div',{className:"_gx8"},[ra]),ta=i.create('div',{className:"_gx6"},[ma]),ua=i.create('div',{className:"_3owb"},[sa,ta]),va=i.create('li',{className:"_5rz",id:'collectionItemPlaceholder'+pa},[ua]);if(qa&&ja.replaceExistingElement){i.replace(qa.parentNode,va);}else{if(qa){i.remove(qa.parentNode);}else if(ka.isOverview()&&la.children.length>=ca)h.addClass(la.children[ca-1],"_51k9");i.prependContent(la,va);}});},replaceItem:function(ha,ia,ja){var ka=o.byClass(ha,"_620"),la=i.scry(ka,'div[data-obj="'+ia+'"]')[0];if(la){ga.inform(ga.NEW_ITEM,{grid:ka,newItem:ja});i.replace(la.parentNode,ja);}},addItemToCollection:function(ha,ia,ja){var ka=aa(ja);if(!ka)return;var la=i.scry(ka,"._620")[0],ma=la.parentNode.nextSibling;if(ma&&h.hasClass(ma,"_3t3"))i.remove(la.lastChild);this.inform(ga.NEW_ITEM,{grid:la,newItem:ha});var na=aa('collectionItemPlaceholder'+ia);if(na){i.replace(na,ha);return;}i.prependContent(la,ha);},createFromArray:function(ha){return ha.map(function(ia){return new ga(ia.token,ia.controller,ia.tab_node,ia.tab_count,ia.order);});},decrementCount:function(ha){t.callWithSection(ha,function(ia){if(ia._tabCount>0){ia._tabCount--;ia.refreshCount();ia.flashCountIf();}});},enableContentLoader:function(ha,ia,ja){t.callWithSection(ha,function(ka){ka.addContentLoader(ia,ja);});},getIDByToken:function(ha){return 'pagelet_timeline_app_collection_'+ha;},incrementCount:function(ha){t.callWithSection(ha,function(ia){ia._tabCount++;ia.refreshCount();ia.flashCountIf();});},registerAuxContent:function(ha,ia){t.callWithSection(ha,function(ja){ja.registerAuxContent(ia);});},registerAddCurationContent:function(ha,ia,ja){t.callWithSection(ha,function(ka){ka.registerAddCurationContent(ia,ja);});},registerSortContent:function(ha,ia,ja){t.callWithSection(ha,function(ka){ka.registerSortContent(ia,ja);});},setLoaded:function(ha){t.callWithSection(ha,function(ia){ia.setIsLoaded(true);ia._parentSection.inform('loaded',ia);ia._parentSection.unsetMinHeight();});},setFullyLoaded:function(ha){t.callWithSection(ha,function(ia){ia._isFullyLoaded=true;var ja=ia._parentSection;ja._sk===ja._parentSection._sk&&ja._parentSection.addSectionTeasers();});},setFTID:function(ha,ia){t.callWithSection(ha,function(ja){ja.setFTID(ia);});}});w(ga.prototype,{addContentLoader:function(ha,ia){this._cursor=ia;q.subscribe('Medley/requestDataSet',function(){var ja={node:ha};if(h.hasClass(ha,"_3t3")){ja.type=u.TRIGGER_CLICK;}else if(this._isFrozen){i.remove(ha);ja.node=v.pager.cloneNode(true);i.appendContent(this.getNode(),ja.node);ja.type=u.TRIGGER_CLICK;}else{ja.onVisibleBuffer=ba;ja.onVisibleStrict=true;ja.type=u.TRIGGER_ONVISIBLE;}if(ja.type===u.TRIGGER_CLICK)ja.callback=t.setActiveSectionID.curry(this.id);var ka=w({displayCallback:function(la){i.remove(ja.node);la();},options:{append:true}},this.getDefaultPageletConfig());ka.data.overview=this.isOverview();this._triggerLoader=null;this._contentLoader=new u(ka,[ja]);}.bind(this));},_createNode:function(){var ha=this.parent._createNode();ha.setAttribute('aria-role','tabpanel');return ha;},createTriggerLoader:function(){q.subscribe('Medley/requestDataSet',function(){var ha=this.getDefaultPageletConfig(),ia={callback:fa.curry(this,ha),node:this._tabNode,type:u.TRIGGER_CLICK};this._triggerLoader=new u(ha,[ia]);}.bind(this));},disableContentLoader:function(){this._contentLoader&&this._contentLoader.disableTriggers();},enableContentLoader:function(){var ha=this._triggerLoader||this._contentLoader;ha&&ha.enableTriggers();},freeze:function(){this._isFrozen=true;if(!this._contentLoader||this._contentLoader._loading)return;this._contentLoader.removeTriggers(u.TRIGGER_ONVISIBLE);var ha=j.scry(this.getNode(),"._3t3");if(!ha.length){var ia=j.scry(this.getNode(),"._359")[0];ia.length&&this.addContentLoader(ia,this._cursor);}},getCount:function(){return this._tabCount;},getDefaultPageletConfig:function(){return {controller:this._controller,data:w({collection_token:this._token,cursor:this._cursor},l.get(),{ftid:this._ftid,order:this._order},{sk:this._parentSection._sk}),node:this.getNode()};},getMedleySiteKey:function(){return this._parentSection._parentSection._sk;},flashCountIf:function(){if(this._parentSection.getActiveCollection()!=this){h.addClass(this._tabNode,"_4-k9");setTimeout(h.removeClass.curry(this._tabNode,"_4-k9"),800);}},isOverview:function(){return this._parentSection._sk!=this._parentSection._parentSection._sk;},registerAuxContent:function(ha){this.auxContent=ha;if(ha.nodeType==11)this.auxContent=i.create('span',null,ha);if(this._parentSection._activeCollection!==this)h.hide(this.auxContent);this._parentSection.addAuxContent(this.auxContent);},registerAddCurationContent:function(ha,ia){this.curationContent=(ha.nodeType==11)?i.create('span',null,ha):ha;this.curationContentOpen=ia;this._parentSection.addCurationContent(this.curationContent,this);},registerSortContent:function(ha,ia){this._unregisterSortContent();ia.subscribeOnce('change',function(ja,ka){i.setContent(i.find(ha,"._57oy"),ka.label);this._sort(ka.value);}.bind(this));this._sortContent=ha;},refreshCount:function(){if(!this._tabNode)return;var ha=j.find(this._tabNode,"._3d0");if(this._tabCount>0){i.setContent(ha,z.formatNumber(this._tabCount,0,m.numberDelimiter,''));}else i.setContent(ha,'');},_resetContent:function(){this._contentLoader&&this._contentLoader.destroy();this.curationContent&&i.remove(this.curationContent);this.curationContent=null;i.remove(this.getNode());this._node=null;i.appendContent(j.find(this._parentSection.getNode(),"div._3i9"),this.getNode());this.addContentLoader(j.find(this.getNode(),"._359"),0);},setFTID:function(ha){this._ftid=ha;},_sort:function(ha){this._order=ha;this._resetContent();var ia=this._parentSection,ja=ia._parentSection;if(!ja.isMedleyView()&&ia._sk===ja._sk){var ka=n.getCurrentURI();ka.addQueryData({order:this._order});n.rewriteCurrentURI(n.getCurrentURI().getUnqualifiedURI(),ka);}},thaw:function(){this._isFrozen=false;},_unregisterSortContent:function(){this._sortContent&&i.remove(this._sortContent);this._sortContent=null;},getToken:function(){return this._token;}});e.exports=ga;});
__d("TimelineAppSectionCuration",["Animation","Arbiter","CSS","DOM","Ease","Event","OnVisible","Style","TidyArbiterMixin","copyProperties","cx","queryThenMutateDOM","tidyEvent"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Arbiter'),i=b('CSS'),j=b('DOM'),k=b('Ease'),l=b('Event'),m=b('OnVisible'),n=b('Style'),o=b('TidyArbiterMixin'),p=b('copyProperties'),q=b('cx'),r=b('queryThenMutateDOM'),s=b('tidyEvent'),t=0,u={},v={};function w(y,z){var aa,ba;r(function(){ba=y.offsetHeight;aa=z===x.SHOW_STATE?y.firstChild.offsetHeight:0;},function(){n.set(y,'height',ba+'px');n.set(y,'overflow','hidden');aa&&i.addClass(y.parentNode,"_52bu");m.checkBuffer.defer();var ca=j.getID(y);v[ca]&&v[ca].stop();v[ca]=new g(y).to('height',aa).ondone(function(){delete v[ca];if(aa){n.set(y,'height','');n.set(y,'overflow','');}!aa&&i.removeClass(y.parentNode,"_52bu");h.inform('reflow');}).duration(Math.abs(aa-ba)*1.5).ease(k.sineOut).go();});}var x=p({addSection:function(y,z,aa,ba){u[y]={buttonShow:z,buttonHide:aa,content:ba,id:y,state:x.HIDE_STATE};n.set(ba,'height','0px');n.set(ba,'overflow','hidden');i.show(ba);s([l.listen(aa,'click',x.informState.curry(x.HIDE_STATE,y)),l.listen(z,'click',x.informState.curry(x.SHOW_STATE,y))]);x.register(y,function(ca,da){new m(ba,w.curry(ba,ca),true,t);i.toggle(aa);i.toggle(z);});},informState:function(y,z){if(u[z]&&u[z].state!==y){u[z].state=y;x.inform(y,u[z]);}},register:function(y,z){var aa=x.subscribe([x.HIDE_STATE,x.SHOW_STATE],function(ba,ca){if(ca.id===y)z(ba,ca,aa);});},getSectionState:function(y){if(u[y])return u[y].state;},SHOW_STATE:'show',HIDE_STATE:'hide'},o);e.exports=x;});
__d("TimelineMonitor",["Arbiter","Event","Run","Vector","ViewportBounds","ge","queryThenMutateDOM"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Event'),i=b('Run'),j=b('Vector'),k=b('ViewportBounds'),l=b('ge'),m=b('queryThenMutateDOM'),n={},o={},p=0,q=[],r=null,s=false;function t(){n={};o={};p=0;q.length=0;r&&r.remove();r=null;s=false;}function u(){if(!r)r=h.listen(window,'scroll',z);if(!s){i.onLeave(t);s=true;}z();}var v=[],w=[];function x(){q.forEach(function(ea){var fa=aa.getSection(ea);if(fa&&fa!==o[ea.id]){o[ea.id]=fa;v.push({section:fa});}});var ba=k.getTop()+j.getScrollPosition().y;for(var ca in n){var da=n[ca];if((ba>=da.boundary&&p<=da.boundary)||(ba<=da.boundary&&p>=da.boundary)){n[ca].fromAbove=p<ba;w.push(n[ca]);}}p=ba;}function y(){v.forEach(function(ba){g.inform(aa.SECTION_CHANGE,ba);});w.forEach(function(ba){g.inform(aa.BOUNDARY_PASSED,ba);});v.length=0;w.length=0;}function z(){m(x,y,'TimelineMonitor/scroll');}var aa={BOUNDARY_PASSED:'TimelineMonitor/boundary',SECTION_CHANGE:'TimelineMonitor/change',getSection:function(ba){var ca=k.getTop()+j.getScrollPosition().y,da=ba.childSections.getHead();while(da){if(l(da.nodeID)&&ca<j.getElementPosition(da.getNode()).y+j.getElementDimensions(da.getNode()).y)return da;da=da.getNext();}},monitorBoundary:function(ba,ca){ca=ca||ba;if(!n[ca]||n[ca].boundary!==ba){n[ca]={boundary:ba,id:ca};u();}},monitorSection:function(ba){o[ba.id]=null;q.push(ba);u();return aa.getSection(ba);},poke:function(ba){z();}};e.exports=aa;});
__d("TimelineSmartInsert",["Run","UserAgent","Vector"],function(a,b,c,d,e,f){var g=b('Run'),h=b('UserAgent'),i=b('Vector'),j=100;function k(q){if(q==='viewport')return i.getViewportDimensions().y;return q;}var l=false,m=false;function n(){if(m)return;g.onLeave(o);m=true;}function o(){l=false;m=false;}var p={run:function(q,r,s){n();if(!l||h.ie()<=8){r();return;}var t=q.offsetHeight;r();var u=q.offsetHeight,v=i.getScrollPosition().y,w=i.getElementPosition(q).y;if(u!==t&&w<v&&w+t<v+k(s||j))window.scrollBy(0,u-t);},enable:function(){l=true;}};e.exports=p;});
__d("TimelineAppSection",["Arbiter","Class","CSS","DOM","DOMQuery","DOMScroll","JSLogger","MedleyPageletRequestData","PageletSet","Style","TidyArbiter","TidyArbiterMixin","TimelineAppCollection","TimelineAppSectionCuration","TimelineDynamicSection","TimelineMonitor","TimelineSection","TimelineSmartInsert","TriggerablePageletLoader","ViewportBounds","copyProperties","csx","cx","ge","tx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Class'),i=b('CSS'),j=b('DOM'),k=b('DOMQuery'),l=b('DOMScroll'),m=b('JSLogger'),n=b('MedleyPageletRequestData'),o=b('PageletSet'),p=b('Style'),q=b('TidyArbiter'),r=b('TidyArbiterMixin'),s=b('TimelineAppCollection'),t=b('TimelineAppSectionCuration'),u=b('TimelineDynamicSection'),v=b('TimelineMonitor'),w=b('TimelineSection'),x=b('TimelineSmartInsert'),y=b('TriggerablePageletLoader'),z=b('ViewportBounds'),aa=b('copyProperties'),ba=b('csx'),ca=b('cx'),da=b('ge'),ea=b('tx'),fa=500,ga=2,ha=500,ia=18,ja=j.create('div',{className:"_3s_"});function ka(){return j.create('span',{className:"_3s18"},[j.create('a',{className:"_3s19"},"More"),j.create('span',{className:"_3s1a"})]);}var la=m.create('collections'),ma={notes:295,events:345,photos:555,app_quoraapp:569,friends:603,app_foodspotting:621,map:621,favorites:645,app_pinterestapp:699,app_instapp:699,books:699,movies:699,tv:699,music:725};function na(pa){return ma[pa.replace('pagelet_timeline_medley_','')];}function oa(pa,qa,ra,sa){this.parent.construct(this,oa.getIDBySK(qa),pa,ra);this._sk=qa;this._title=sa;}h.extend(oa,u);aa(oa,{createFromArray:function(pa){return pa.map(function(qa){return new oa(qa.controller,qa.sk,qa.label,qa.title);});},getIDBySK:function(pa){return 'pagelet_timeline_medley_'+pa;},registerCollections:function(pa,qa,ra){w.callWithSection(oa.getIDBySK(pa),function(sa){s.createFromArray(qa).forEach(sa.appendSection.bind(sa));var ta=sa.childSections.get(ra);sa.setActiveCollection(ta);ta.setIsLoaded(true);});},removeEmptyAppSection:function(pa){w.callWithSection(oa.getIDBySK(pa),function(qa){qa.remove();});}},r);aa(oa.prototype,r,{_createNode:function(){var pa=this.parent._createNode();pa.setAttribute('aria-labelledby','medley_header_'+this._sk);pa.setAttribute('aria-role','region');j.prependContent(pa,j.create('div',{className:"_3cz"},[this._title,j.create('div',{className:"_3dc",'aria-role':'tablist'})]));this.resetMinHeight(pa);return pa;},addAuxContent:function(pa){var qa=k.scry(this.getNode(),"._6ph")[0];qa&&j.appendContent(qa,pa);this._activeCollection&&this._checkTabDimensions(this._activeCollection);},addCurationContent:function(pa,qa){var ra=k.scry(this.getNode(),"._1_cb")[0];ra&&j.appendContent(ra,pa);this._checkCurationContent(qa);},createTriggerLoader:function(pa){var qa=function(ra){this._parentSection._lastLoadedSection=this;this.setIsLoaded(true);x.enable();x.run(this.getNode(),function(){ra();this.unsetMinHeight();v.poke(this._parentSection.id);}.bind(this),'viewport');}.bind(this);q.subscribe('Medley/requestDataSet',function(){this._triggerLoader=new y({controller:this._controller,data:this.getData(),displayCallback:qa,options:{constHeight:true},node:this.getNode()},[{node:this.getNode(),onVisibleBuffer:fa,onVisibleStrict:true,type:pa?y.TRIGGER_NOW:y.TRIGGER_ONVISIBLE}]);}.bind(this));},freeze:function(){i.addClass(this.getNode(),"_c4e");if(da(this.nodeID)&&!this.isLoaded())this._triggerLoader&&this._triggerLoader.disableTriggers();this.freezeChildren();},getData:function(){if(!this._data)this._data=aa({sk:this._sk},n.get(),{overview:this._parentSection._sk!==this._sk});return this._data;},getActiveCollection:function(){return this._activeCollection;},remove:function(){if(o.hasPagelet(this.id))o.removePagelet(this.id);j.remove(this.getNode());this._parentSection.childSections.remove(this.id);},setActiveCollection:function(pa){if(this._activeCollection===pa||!pa._tabNode)return;if(this._activeCollection){g.inform('TimelineSideAds/refresh');la.log('change_collection',{previous_collection:this._activeCollection.getToken(),new_collection:pa.getToken()});this.resetMinHeight();this._activeCollection.disableContentLoader();i.hide(this._activeCollection.getNode());i.removeClass(this._activeCollection._tabNode,"_3s-");j.scry(this._activeCollection._tabNode,"div._3s_").forEach(j.remove);j.appendContent(pa._tabNode,ja.cloneNode(true));this._activeCollection.auxContent&&i.hide(this._activeCollection.auxContent);this._activeCollection.curationContent&&i.hide(this._activeCollection.curationContent);this._activeCollection._tabNode.setAttribute('aria-selected','false');}pa.auxContent&&i.show(pa.auxContent);this._checkCurationContent(pa);this._checkTabDimensions(pa);this._activeCollection=pa;oa.inform('changeCollection');if(!da(pa.nodeID))j.appendContent(k.find(this.getNode(),"div._3i9"),pa.getNode());i.addClass(pa._tabNode,"_3s-");i.show(pa.getNode());pa.isLoaded()&&this.unsetMinHeight();pa._tabNode.setAttribute('aria-selected','true');pa.enableContentLoader();},resetMinHeight:function(pa){pa||(pa=this.getNode());var qa=na(this.id)||pa.offsetHeight-ga;qa>0&&this._updateScrollAfterHeight(pa,qa);},scrollTo:function(pa,qa){var ra=z.getElementPosition(this.getNode());ra.y-=pa||ia;qa&&this._parentSection.toggleScrollLoad(false);l.scrollTo(ra,ha,null,null,function(){ra=z.getElementPosition(this.getNode());ra.y-=pa||ia;l.scrollTo(ra);qa&&this._parentSection.toggleScrollLoad(true);}.bind(this));},thaw:function(){i.removeClass(this.getNode(),"_c4e");this._triggerLoader&&this._triggerLoader.enableTriggers();this.thawChildren();},unsetMinHeight:function(){this._updateScrollAfterHeight(this.getNode(),0);},_updateScrollAfterHeight:function(pa,qa){p.set(pa,'min-height',qa+'px');g.inform('reflow');},_checkCurationContent:function(pa){var qa=k.scry(this.getNode(),"._2zh3")[0];if(qa){i.conditionShow(qa,pa.curationContent);if(pa.curationContent){i.show(pa.curationContent);if(pa.curationContentOpen)t.informState('show',this.id);}else t.informState('hide',this.id);}},_checkTabDimensions:function(pa){if(!this._tabObj){var qa=this.getNode();this._tabObj={aux:j.find(qa,"._6ph"),hidden:0,nav:j.find(qa,"._1_ca"),items:j.scry(qa,"._3c_"),tabs:j.find(qa,"._3dc"),width:0};p.set(this._tabObj.tabs,'visibility','visible');}var ra=this._tabObj,sa=ra.nav.offsetWidth-ra.aux.offsetWidth;if(ra.hidden&&pa._tabNode.parentNode===ra.overflow){j.prependContent(ra.overflow,ra.dropdown.previousSibling);j.insertBefore(ra.dropdown,pa._tabNode);}if(sa-ra.tabs.offsetWidth<0||(ra.hidden&&ra.width!==sa)){var ta=ra.items.length;ra.width=sa;ra.hidden=0;if(!ra.dropdown){ra.dropdown=ka();ra.overflow=j.find(ra.dropdown,"._3s1a");}else for(var ua=0;ua<ta;ua++)j.appendContent(ra.tabs,ra.items[ua]);j.appendContent(ra.tabs,ra.dropdown);for(ua=ta-1;ua>0&&sa-ra.tabs.offsetWidth<0;ua--)if(ra.items[ua]!==pa._tabNode){j.prependContent(ra.overflow,ra.items[ua]);ra.hidden++;}if(!ra.hidden)j.remove(ra.dropdown);}}});e.exports=oa;});
__d("TimelineConstants",[],function(a,b,c,d,e,f){var g={DS_HEIGHT:'timeline-unit-height',DS_LOADED:'timeline-capsule-loaded',DS_SIDEORG:'timeline-unit-sideorg',DS_TAILBALANCE:'timeline-capsule-tailbalance',DS_COLUMN_HEIGHT_DIFFERENTIAL:'timeline-column-diff-height',FIXED_SIDE_LEFT:'left',FIXED_SIDE_RIGHT:'right',FIXED_SIDE_BOTH:'both',FIXED_SIDE_NONE:'none',SCROLL_TO_OFFSET:30,SUBSECTION_SCROLL_TO_OFFSET:90,SCRUBBER_DEFAULT_OFFSET:38,SECTION_LOADING:'TimelineConstants/sectionLoading',SECTION_LOADED:'TimelineConstants/sectionLoaded',SECTION_FULLY_LOADED:'TimelineConstants/sectionFullyLoaded',SECTION_REGISTERED:'TimelineConstants/sectionRegistered'};e.exports=g;});
__d("TimelineLegacySections",[],function(a,b,c,d,e,f){var g={},h={get:function(i){return g[i];},getAll:function(){return g;},remove:function(i){delete g[i];},removeAll:function(){g={};},set:function(i,j){g[i]=j;}};e.exports=h;});
__d("TimelineURI",["URI"],function(a,b,c,d,e,f){var g=b('URI'),h={TIMELINE_KEY:'timeline',WALL_KEY:'wall',parseURI:function(i){i=g(i);var j=i.getQueryData(),k=i.getPath(),l=k.split('/').slice(1);if(l[0]=='people'||l[0]=='pages')l=l.slice(2);var m=j.sk||l[1]||h.TIMELINE_KEY;if(m==h.WALL_KEY)m=h.TIMELINE_KEY;var n=null,o=null;if(m==h.TIMELINE_KEY){o=parseInt(l[2],10)||null;n=parseInt(l[3],10)||null;}return {path:k,id:j.id||l[0],key:m,viewas:j.viewas?j.viewas:0,filter:j.filter?j.filter:null,year:o,month:n,friendship:!!j.and};}};e.exports=h;});
__d("TimelineController",["Event","Arbiter","CSS","DataStore","DOMQuery","Run","ScrollingPager","TidyArbiter","TimelineConstants","TimelineLegacySections","TimelineURI","Vector","ViewportBounds","$","copyProperties","ge","tidyEvent","queryThenMutateDOM"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('CSS'),j=b('DataStore'),k=b('DOMQuery'),l=b('Run'),m=b('ScrollingPager'),n=b('TidyArbiter'),o=b('TimelineConstants'),p=b('TimelineLegacySections'),q=b('TimelineURI'),r=b('Vector'),s=b('ViewportBounds'),t=b('$'),u=b('copyProperties'),v=b('ge'),w=b('tidyEvent'),x=b('queryThenMutateDOM'),y=358,z=48,aa=740,ba=1285,ca=null,da=false,ea,fa,ga,ha={},ia={},ja=[],ka=null,la=null,ma=false,na=false,oa=0,pa=false,qa=false,ra=false,sa={},ta=false;function ua(){ka&&ka.remove();ka=null;}function va(hb,ib,jb){jb=jb||[];if(ha[hb])return ha[hb][ib].apply(ha[hb],jb);ia[hb]=ia[hb]||{};ia[hb][ib]=jb;return false;}function wa(){if(!(pa||ra||qa)){ua();return;}var hb=r.getScrollPosition();pa=pa&&ab(v('rightCol'),hb,'paddingTop',true);qa=qa&&ab(t('pagelet_above_header_timeline'),hb,'top');ra=ra&&ab(t('blueBar'),hb,'paddingTop');}var xa=0;function ya(){xa=r.getScrollPosition();}function za(){x(ya,function(){var hb=oa===0||xa.y>=oa;va(gb.STICKY_HEADER,'toggle',[hb]);va(gb.CONTENT,'checkCurrentSectionChange');},'TimelineController/scrollListener');}function ab(hb,ib,jb,kb){if(!hb){ua();return;}if(ib.y<=0){bb(hb,jb);return false;}else{var lb=kb&&gb.getCurrentScrubber();if(lb&&i.hasClass(lb.getRoot(),'fixed_elem')){bb(hb,jb);return false;}else{var mb=parseInt(hb.style[jb],10)||0;if(ib.y<mb){i.addClass(hb,'timeline_fixed');hb.style[jb]=ib.y+'px';}else i.removeClass(hb,'timeline_fixed');}}return true;}function bb(hb,ib){hb.style[ib]='0px';i.removeClass(hb,'timeline_fixed');}function cb(){x(gb.shouldShowWideAds,function(){va(gb.ADS,'adjustAdsType',[ma]);va(gb.ADS,'adjustAdsToFit');va(gb.CONTENT,'adjustContentPadding');va(gb.STICKY_HEADER_NAV,'adjustMenuHeights');},'TimelineController/resize');}function db(hb,ib){if(hb=='sidebar/initialized')ta=true;va(gb.ADS,'adjustAdsType',[gb.shouldShowWideAds()]);}function eb(hb,ib){var jb=v('rightCol');if(jb){jb.style.paddingTop=ib+'px';pa=true;}var kb=t('pagelet_above_header_timeline');if(kb.firstChild){t('above_header_timeline_placeholder').style.height=kb.offsetHeight+'px';kb.style.top=ib+'px';qa=true;}var lb=document.documentElement;ra=lb.clientHeight<400||lb.clientWidth<lb.scrollWidth;if(ra)t('blueBar').style.paddingTop=ib+'px';ka=g.listen(window,'scroll',wa);h.inform('reflow');}function fb(){while(ja.length)ja.pop().remove();for(var hb in ha)ha[hb].reset&&ha[hb].reset();ua();ga.unsubscribe();ga=null;ca=null;ea=null;ha={};ia={};la=null;na=false;oa=0;qa=false;if(pa){var ib=v('rightCol');if(ib){ib.style.paddingTop='';i.removeClass(ib,'timeline_fixed');}}pa=false;if(ra){t('blueBar').style.paddingTop='';i.removeClass(t('blueBar'),'timeline_fixed');}ra=false;ta=false;da=false;j.purge(o.DS_HEIGHT);j.purge(o.DS_LOADED);j.purge(o.DS_SIDEORG);j.purge(o.DS_TAILBALANCE);j.purge(o.DS_COLUMN_HEIGHT_DIFFERENTIAL);}var gb={NAV:'nav',STICKY_HEADER:'sticky_header',STICKY_HEADER_NAV:'sticky_header_nav',SCRUBBER:'scrubber',CONTENT:'content',ADS:'ads',LOGGING:'logging',init:function(hb,ib,jb){if(da)return;if(ib==q.WALL_KEY)ib=q.TIMELINE_KEY;da=true;ea=hb;fa=jb.has_fixed_ads;na=jb.one_column_minimal;sa={allactivity:true,approve:true};if(!na)u(sa,{games:true,map:true,music:true,video:true});sa[q.TIMELINE_KEY]=true;va(gb.CONTENT,'adjustContentPadding');ja.push(g.listen(window,'scroll',za),g.listen(window,'resize',cb));ga=h.subscribe(['sidebar/initialized','sidebar/show','sidebar/hide'],db);w(n.subscribe('TimelineCover/coverCollapsed',eb));l.onLeave(fb);gb.registerCurrentKey(ib);},setAdsTracking:function(hb){va(gb.ADS,'start',[hb]);},pageHasScrubber:function(hb){return !hb||(!na&&hb.match(/^(og_)?app_/))||(hb in sa);},fixedAds:function(){return fa;},registerCurrentKey:function(hb){ca=hb;la=hb!=='map'&&r.getViewportDimensions().y<aa&&gb.pageHasScrubber(hb);la=la||t('blueBar').offsetTop;va(gb.ADS,'setShortMode',[la]);va(gb.ADS,'updateCurrentKey',[hb]);oa=hb==q.TIMELINE_KEY?y-z:0;},getCurrentKey:function(){return ca;},getCurrentScrubber:function(){return ha[gb.SCRUBBER];},getCurrentStickyHeaderNav:function(){return ha[gb.STICKY_HEADER_NAV];},scrubberHasLoaded:function(hb){i.conditionClass(hb.getRoot(),'fixed_elem',!la);va(gb.ADS,'registerScrubber',[hb]);},scrubberHasChangedState:function(){va(gb.ADS,'adjustAdsToFit');},scrubberWasClicked:function(hb){va(gb.LOGGING,'logScrubberClick',[hb]);},headerNavWasClicked:function(hb){va(gb.LOGGING,'logHeaderNavClick',[hb]);},sectionHasChanged:function(hb,ib){va(gb.STICKY_HEADER_NAV,'updateSection',[hb,ib]);va(gb.SCRUBBER,'updateSection',[hb,ib]);va(gb.ADS,'loadAdsIfEnoughTimePassed');va(gb.LOGGING,'logSectionChange',[hb,ib]);},navigateToSection:function(hb){va(gb.CONTENT,'navigateToSection',[hb]);},shouldShowWideAds:function(){if(!ta){ma=false;}else{var hb=ba+s.getRight()+s.getLeft();ma=r.getViewportDimensions().x>=hb;}return ma;},sidebarInitialized:function(){return ta;},adjustStickyHeaderWidth:function(){va(gb.STICKY_HEADER,'adjustWidth');},isOneColumnMinimal:function(){return na;},register:function(hb,ib){ha[hb]=ib;if(ia[hb]){for(var jb in ia[hb])va(hb,jb,ia[hb][jb]);delete ia[hb];}},adjustScrollingPagerBuffer:function(hb,ib){var jb=j.get(o.DS_COLUMN_HEIGHT_DIFFERENTIAL,ib);if(!jb)return;var kb=m.getInstance(hb);kb&&kb.setBuffer(kb.getBuffer()+Math.abs(jb));},runOnceWhenSectionFullyLoaded:function(hb,ib,jb){var kb=p.get(ib);if(kb){var lb=false;k.scry(kb.node,'.fbTimelineCapsule').forEach(function(nb){if(!lb&&parseInt(j.get(o.DS_LOADED,nb.id),10)>=parseInt(jb,10)){hb();lb=true;}});if(lb)return;}var mb=h.subscribe(o.SECTION_FULLY_LOADED,function(nb,ob){if(ob.scrubberKey===ib&&ob.pageIndex===jb){hb();mb.unsubscribe();}});}};e.exports=gb;});
__d("TimelineDrag",["Event","ArbiterMixin","Locale","Style","Vector","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('ArbiterMixin'),i=b('Locale'),j=b('Style'),k=b('Vector'),l=b('copyProperties');function m(n,o,p){p=p||{};this._listenOn=p.listenOn;this._offsetInput=o;this._defaultOffset=p.default_offset;this._killClicks=p.killClicks;this._vertical=true;this._RTLXSwitch=false;this.setPicture(n,p);}l(m.prototype,h,{setPicture:function(n,o){if(!n)return false;o=o||{};this._picture=n;this._defaultOffset=o.default_offset;if(o.offsetInput)this._offsetInput=o.offsetInput;if(o.vertical!==undefined)this._vertical=o.vertical;if(o.height)this._containerHeight=o.height;if(o.width)this._containerWidth=o.width;if(this._vertical){this._offsetType='top';this._eventCoord='y';}else{this._RTLXSwitch=i.isRTL();this._offsetType='left';this._eventCoord='x';}if(this._picture.complete){this._initialLoad();}else this._loadListener=g.listen(this._picture,'load',function(){this._loadListener.remove();this._initialLoad();}.bind(this));},destroy:function(){this._stopDrag();this._saveOffset();this._mousedown&&this._mousedown.remove();this._onclick&&this._onclick.remove();this._loadListener&&this._loadListener.remove();},_initialLoad:function(){var n=this._listenOn?this._listenOn:this._picture;this._mousedown&&this._mousedown.remove();this._mousedown=g.listen(n,'mousedown',this._onMouseDown.bind(this));if(this._vertical){this._maxOffset=this._containerHeight-this._picture.offsetHeight;}else this._maxOffset=this._containerWidth-this._picture.offsetWidth;if(this._defaultOffset!==undefined)this._setOffset(this._defaultOffset);this._onclick&&this._onclick.remove();if(this._killClicks)this._onclick=g.listen(n,'click',this._onClick.bind(this));this._saveOffset();},_onClick:function(event){event.kill();},_onMouseDown:function(event){var n=parseInt(j.get(this._picture,this._offsetType),10)||0;this._pictureStartDragOffset=n-k.getEventPosition(event)[this._eventCoord];this._startDrag();event.kill();},_startDrag:function(){if(!this._dragStarted){this.inform('startdrag',this);this._dragTokens=[g.listen(document.documentElement,'mouseup',this._onMouseUp.bind(this)),g.listen(document.documentElement,'mousemove',this._onMouseMove.bind(this))];this._dragStarted=true;}},_saveOffset:function(){var n=parseInt(j.get(this._picture,this._offsetType),10);if(this._RTLXSwitch){this._offsetInput.value=n+this._containerWidth-this._picture.offsetWidth;}else this._offsetInput.value=n;},_stopDrag:function(){if(this._dragStarted){this.inform('stopdrag',this);this._dragStarted=false;this._dragTokens.forEach(function(n){n.remove();});this._saveOffset();}},_onMouseUp:function(event){this._stopDrag();event.kill();},_setOffset:function(n){if(this._RTLXSwitch){n=Math.max(0,Math.min(n,-this._maxOffset));}else n=Math.min(0,Math.max(n,this._maxOffset));j.set(this._picture,this._offsetType,n+'px');},_onMouseMove:function(event){this._setOffset(this._pictureStartDragOffset+k.getEventPosition(event)[this._eventCoord]);event.kill();}});e.exports=m;});
__d("TimelineCover",["Arbiter","Button","CSS","DOM","HTML","Parent","DOMScroll","TimelineController","TimelineDrag","Style","Vector","$","copyProperties","cx","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Button'),i=b('CSS'),j=b('DOM'),k=b('HTML'),l=b('Parent'),m=b('DOMScroll'),n=b('TimelineController'),o=b('TimelineDrag'),p=b('Style'),q=b('Vector'),r=b('$'),s=b('copyProperties'),t=b('cx'),u=b('ge');function v(w,x,y){this.root=r('fbProfileCover');if(typeof x==='object'){this._coverHeight=x.cover_height;this._coverWidth=x.cover_width;this.previewing=x.previewing;this._isLegacy=false;}else{this._isLegacy=true;this._coverHeight=x;this.previewing=y;}this._parentSection=l.byClass(this.root,'fbTimelineSection');this.cover=j.find(this.root,'.cover');v.instance=this;this.editing=false;if(!this._parentSection)this._parentSection=l.byClass(this.root,'fbEventHeader');if(this.previewing){this.editMode();this.updateCoverImage(this.previewing);}}v.instance=null;v.getInstance=function(){return v.instance;};s(v.prototype,{showLoadingIndicator:function(){var w=u('fbCoverImageContainer');if(w)i.addClass(w,'opaquedLoading');},hideLoadingIndicator:function(){var w=u('fbCoverImageContainer');if(w)i.removeClass(w,'opaquedLoading');},isCoverImageVerticalFlow:function(w){return !(w.style.height);},editMode:function(){h.setEnabled(j.find(this.root,'label.cancelButton'),true);h.setEnabled(j.find(this.root,'label.saveButton'),true);this.hideLoadingIndicator();this._coverImage=j.scry(this.root,'.coverImage')[0];var w=j.scry(this._coverImage,'.coverWrap')[0];if(w){var x=j.find(w,'.coverPhotoImg');this._originalIsVertical=this.isCoverImageVerticalFlow(x);this._originalOffset=p.get(x,this._originalIsVertical?'top':'left');}i.addClass(this._parentSection,'fbEditCover');m.scrollTo(this.root);if(this.previewing){j.remove(this._coverImage);i.show(this._coverImage);}var y=j.scry(this._coverImage,'.coverPhotoImg')[0];if(y)this._createDragger();this.editing=true;g.inform('CoverPhotoEdit',{sender:this,state:"open"});},_exitEditMode:function(){if(this._timelineDrag){this._timelineDrag.destroy();this._timelineDrag=null;}j.find(this.root,'input.hiddenPhotoID').value=null;j.find(this.root,'input.hiddenVideoID').value=null;h.setEnabled(j.find(this.root,'label.cancelButton'),false);h.setEnabled(j.find(this.root,'label.saveButton'),false);i.removeClass(this._parentSection,'fbEditCover');this.hideLoadingIndicator();this.previewing=false;g.inform('CoverPhotoEdit',{sender:this,state:"closed"});},_createDragger:function(w){var x;if(this._isLegacy){x=j.find(this.root,'input.photoOffsetInput');this._originalIsVertical=true;}else{var y=w===undefined?this._originalIsVertical:w;x=y?j.find(this.root,'input.photoOffsetYInput'):j.find(this.root,'input.photoOffsetXInput');}this._timelineDrag=new o(j.find(this.root,'.coverImage .coverPhotoImg'),x,{height:this._coverHeight,width:this._coverWidth,listenOn:this.cover,vertical:y,killClicks:true});},updateCoverImage:function(w,x,y){this.videoID=y;if(x)this.editMode();j.find(this.root,'input.hiddenPhotoID').value=w;j.find(this.root,'input.hiddenVideoID').value=y||null;h.setEnabled(j.find(this.root,'label.saveButton'),true);if(x)j.replace(j.find(this.root,'.coverImage'),k(x));var z=j.find(j.find(this.root,'.coverImage'),'.coverPhotoImg'),aa=this.isCoverImageVerticalFlow(z),ba;if(this._isLegacy){ba=j.find(this.root,'input.photoOffsetInput');}else ba=aa?j.find(this.root,'input.photoOffsetYInput'):j.find(this.root,'input.photoOffsetXInput');if(this._timelineDrag){this._timelineDrag.setPicture(z,{offsetInput:ba,vertical:aa});}else this._createDragger(aa);},cancelUpdate:function(){j.remove(j.scry(this.root,'.coverImage')[0]);j.prependContent(this.cover,this._coverImage);if(this._originalOffset!==undefined)p.set(j.find(this._coverImage,'.coverPhotoImg'),this._originalIsVertical?'top':'left',this._originalOffset);this._exitEditMode();},saveComplete:function(){this._coverImage=j.scry(this.root,'.coverImage')[0];var w=l.byClass(this.root,'fbTimelineTopSectionBase');w&&i.removeClass(w,"_6_5");this._exitEditMode();},isInEditMode:function(){return this.editing;}});e.exports=v;});
__d("TimelineCoverDisclaimer",["Dialog"],function(a,b,c,d,e,f){var g=b('Dialog');function h(i,j,k){if(h.displayed===undefined){h.displayed=true;}else return;new g().setModal(true).setTitle(i).setBody(j).setButtonsMessage(k).setButtons(g.OK).show();}e.exports=h;});
__d("legacy:TimelineCoverDisclaimer",["TimelineCoverDisclaimer"],function(a,b,c,d){a.TimelineCoverDisclaimer=b('TimelineCoverDisclaimer');},3);
__d("TimelineMedley",["Class","CSS","DOM","DOMPosition","DOMQuery","PageTransitions","TimelineAppSection","TimelineDynamicSectionConfig","TimelineMonitor","TimelineSection","URI","ViewportBounds","copyProperties","csx","cx","ge","$"],function(a,b,c,d,e,f){var g=b('Class'),h=b('CSS'),i=b('DOM'),j=b('DOMPosition'),k=b('DOMQuery'),l=b('PageTransitions'),m=b('TimelineAppSection'),n=b('TimelineDynamicSectionConfig'),o=b('TimelineMonitor'),p=b('TimelineSection'),q=b('URI'),r=b('ViewportBounds'),s=b('copyProperties'),t=b('csx'),u=b('cx'),v=b('ge'),w=b('$'),x='timeline-medley',y='about',z=2,aa=false;function ba(ea){var fa=ea.getQueryData().sk||ea.getPath().split('/')[2];return n.skmapping[fa]||fa;}function ca(ea){if(ea.getQueryData().id)return ea.getQueryData.id;return ea.getPath().split('/')[1];}function da(ea,fa,ga){this.parent.construct(this,x);this.isOverview=ea.length>1;n.breaker=ga.breaker;m.createFromArray(ea).forEach(this.appendSection.bind(this));o.monitorSection(this);this._lastLoadedSection=this.childSections.get(m.getIDBySK(fa)).setIsLoaded(true);p.setActiveSectionID(this._lastLoadedSection.id);if(aa&&this.isMedleyView())this.addSectionPlaceholders();var ha=q.getNextURI();this._vanity=ca(ha);this._sk=ba(ha);if(this.isOverview)l.registerHandler(this._transitionHandler.bind(this));}g.extend(da,p);s(da,{loadToSection:function(ea,fa){p.setActiveSectionID(ea);p.callWithSection(x,function(ga){var ha=ga.childSections.getHead(),ia=0;while(ha&&ha.id!==ea){ia++;ha=ha.getNext();}if(!ia)return fa(ha);ia--;ia&&ga.addUpcomingSectionPlaceholders(ga.childSections.getHead(),ia);ga.addSectionPlaceholder(ha,ha.getPrev(),true);var ja=ha.subscribe('loaded',function(){fa(ha);ja.unsubscribe();});});},scrollToSection:function(ea,fa,ga){p.callWithSection(ea,function(ha){ha.scrollTo(fa,ga);});},toggleScrollLoad:function(ea){aa=ea;p.callWithSection(x,function(fa){fa.toggleScrollLoad(ea);});}});s(da.prototype,{addSectionTeasers:function(){if(!this.isMedleyView()){h.removeClass(this.getNode(),"_c4f");this.thawChildren();this.addSectionPlaceholders();this.addSectionBreak();}},addUpcomingSectionPlaceholders:function(ea,fa){fa=fa||z;while(ea=ea.getNext())if(!this.addSectionPlaceholder(ea,ea.getPrev())&&--fa<=0)break;},addSectionPlaceholder:function(ea,fa,ga){if(!ea.isLoaded()&&v(ea.nodeID))return false;if(!v(ea.nodeID)){i.insertAfter(fa.getNode(),ea.getNode());ea.createTriggerLoader(ga);return false;}return true;},addSectionBreak:function(){if(this._lastLoadedSection.getNext()){i.insertAfter(this.childSections.getHead().getNode(),n.breaker);}else i.remove(n.breaker);},addSectionPlaceholders:function(){this.addUpcomingSectionPlaceholders(this._lastLoadedSection);},getNode:function(){return w(this.id);},isMedleyView:function(){return this._sk===y;},toggleScrollLoad:function(ea){aa=ea;if(ea){this.thawChildren();this.addSectionPlaceholders();}else this.freezeChildren();},_transitionHandler:function(ea){if(ca(ea)!==this._vanity)return false;var fa=ba(ea);if(!fa)return false;if(fa===y){return false;}else{var ga=ea.getQueryData();if(!ga.next_cursor)return false;var ha=this.childSections.getHead();while(ha){if(ha._sk===fa){if(!ha._activeCollection&&!k.scry(ha._activeCollection.getNode(),"._3t3")[0])return false;this._transitionToSection.bind(this,ha,ga).defer();return true;}ha=ha.getNext();}}return false;},_transitionToSection:function(ea,fa){var ga=j.getElementPosition(ea.getNode()).y-r.getTop();i.scry(ea.getNode(),"._51k9").forEach(function(ja){h.removeClass(ja,"_51k9");});this._sk=ea._sk;p.setActiveSectionID(ea.id);ea.thaw();h.addClass(this.getNode(),"_c4f");this.freezeChildren();var ha=k.find(ea._activeCollection.getNode(),"._3t3");ea._activeCollection.addContentLoader(ha,fa.next_cursor);ea._activeCollection._contentLoader.load({node:ha});var ia=this.childSections.getHead();while(ia&&ia.id!==ea.id){ia.remove();ia=this.childSections.getHead();}p.inform('Medley/transitionToSection',ea.id);ea.scrollTo(ga<0?ga:0);l.transitionComplete();}});e.exports=da;});
__d("TimelineNavLight",["CSS","DOM","DOMQuery","Parent","TimelineSection","csx","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('DOMQuery'),j=b('Parent'),k=b('TimelineSection'),l=b('csx'),m=b('cx');function n(o){var p=i.scry(o,"._6-7")[0],q=i.scry(o,"._6-6"),r=j.byClass(o,"_70k").offsetWidth,s=q[q.length-1];if(s.offsetLeft+s.offsetWidth>r)g.addClass(o,"_5215");for(var t=q.length-1;t>1;t--)if(q[t].offsetLeft+q[t].offsetWidth>r){h.remove(q[t]);}else break;var u="_529n";g.removeClass(j.byClass(o,u),u);k.subscribe('Medley/transitionToSection',function(v,w){if(p&&w===p.getAttribute('data-medley-id'))return;p&&g.removeClass(p,"_6-7");for(var x=0;x<q.length;++x)if(q[x].getAttribute('data-medley-id')===w){g.addClass(q[x],"_6-7");p=q[x];return;}});}e.exports=n;});
__d("TimelineOGCollectionAddSelector",["AsyncRequest","DOM","Form","TidyArbiterMixin","copyProperties","csx","tidyEvent"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('DOM'),i=b('Form'),j=b('TidyArbiterMixin'),k=b('copyProperties'),l=b('csx'),m=b('tidyEvent');function n(o,p,q,r){this._endpoint=q;this._button=o;this._buttonParent=o.parentNode;this._audienceSelector=r;var s=h.find(o,"._4ihv");n.inform('addButton',{button:s,root:this._buttonParent});m([p.getMenu().subscribe('rendered',function(t,u){n.inform('menuOpened',{audienceSelector:r});h.appendContent(h.find(u,"._54ng"),r);}),p.subscribe('itemselected',this._onChange.bind(this))]);}k(n,j);k(n.prototype,j,{_onChange:function(o,p){var q=p.getValue(),r=this.inform('addedToCollection',q)||{};new g(this._endpoint).setData(k(i.serialize(this._audienceSelector),r,{action:'add',collection_token:q,mechanism:'add_selector'})).send();}});e.exports=n;});
__d("TimelineCurationNUXController",["AsyncRequest","CSS","DOM","Event","OGCollectionAddMenu","TimelineOGCollectionAddSelector","URI","$","csx","cx","tidyEvent"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('Event'),k=b('OGCollectionAddMenu'),l=b('TimelineOGCollectionAddSelector'),m=b('URI'),n=b('$'),o=b('csx'),p=b('cx'),q=b('tidyEvent'),r=5,s='pagelet_timeline_medley_movies',t=165,u,v,w,x,y,z,aa=[],ba={reports:0,about:1,section:2,section_privacy:3,add_button:4,privacy:5,0:'reports',1:'about',2:'section',3:'section_privacy',4:'add_button',5:'privacy'};function ca(){aa.forEach(function(ma){ma.button&&ma.button.setAttribute('data-hover','tooltip');ma.listener&&ma.listener.remove();});aa.length=0;}function da(ma){if(y[ma]){y[ma].destroy();delete y[ma];ma==='add_button'&&ca();}z[ma]&&z[ma].parentNode&&i.remove(z[ma]);}function ea(ma){if(!h.hasClass(ma,"_50_y")){h.addClass(ma,"_50_y");d(['Animation'],function(na){new na(ma).to('opacity',0).duration(300).ease(na.ease.end).hide().go();});}}function fa(ma){ga(ma);var na=ba[ma]+1;na&&ha(ba[na]);}function ga(ma){new g('/ajax/timeline/collections/tour/curation/').setAllowCrossPageTransition(true).setData({step:ma}).send();da(ma);}function ha(ma){x=ma;switch(ma){case 'reports':d(['TimelineController'],function(na){na.runOnceWhenSectionFullyLoaded(function(){ja(i.find(n('timeline_tab_content'),"._3rbg"),ma);},'recent','0');});break;case 'about':u=i.scry(n('fbTimelineHeadline'),"._6-6")[1];v=q(j.listen(u,'click',function(){u=null;v.remove();x='section';}));ja(u,ma);break;case 'section':if(u){m(u.getAttribute('href')).go();u=null;v&&v.remove();}else d(['OnVisible','TimelineMedley'],function(na,oa){i.appendContent(i.find(n('pagelet_timeline_main_column'),"._2w3"),z.section);q(j.listen(z.section,'click',function(){oa.scrollToSection(s,t,1);ea(z.section);}));oa.loadToSection(s,function(){ja(n(s),ma);var pa=new na(n(s),function(){ea(z.section);pa.remove();},false,-t);});});break;case 'section_privacy':d(['TimelineAppSectionCuration'],function(na){na.informState(na.SHOW_STATE,s);ja(i.scry(n(s),'.audienceSelector')[0],ma);});break;case 'privacy':j.fire(w,'click');break;}}function ia(ma,na){if(y.add_button){var oa=i.scry(na,'[data-hover]')[0];aa.push({button:oa,listener:q(j.listen(ma,'mouseenter',function(){w=ma;ja(ma,'add_button');}))});oa&&oa.removeAttribute('data-hover');}}function ja(ma,na){if(y[na]){y[na].setContext(ma).setOffsetX(5).show();if(na==='privacy')da('add_button');}}function ka(ma,na,oa){var pa=oa.getAttribute('data-action');if(pa==='next'||pa==='done'){fa(ma);}else ga(ma);}var la={init:function(ma){var na=ma.next_step,oa=ba[na];y=ma.dialogs;z=ma.links?ma.links:[];ca();if(na==='section'&&na!==x){da('section');da('section_privacy');oa+=2;na=ba[oa];}for(var pa in y)q(y[pa].subscribe('button',ka.curry(pa)));if(y.add_button){var qa=ma.isViewingSelf?l:k;q([qa.subscribe('menuOpened',function(ra,sa){ja.curry(i.find(sa.audienceSelector,'.audienceSelector'),'privacy').defer(r);}),qa.subscribe('addButton',function(ra,sa){ia.curry(sa.button,sa.root).defer(r);})]);}if(ma.isViewingSelf&&oa<ba.add_button)ha(na);}};e.exports=la;});
__d("TimelineSideAds",["function-extensions","Arbiter","CSS","DOM","EgoAdsObjectSet","Event","StickyController","TimelineConstants","TimelineController","UIPagelet","URI","Vector","cx","csx","debounce","ge"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('EgoAdsObjectSet'),k=b('Event'),l=b('StickyController'),m=b('TimelineConstants'),n=b('TimelineController'),o=b('UIPagelet'),p=b('URI'),q=b('Vector'),r=b('cx'),s=b('csx'),t=b('debounce'),u=b('ge'),v=2,w=3,x=75,y='data-height',z=30000,aa=0,ba=false,ca,da,ea,fa,ga,ha=new j(),ia,ja=false,ka,la=Infinity,ma=5,na=false,oa,pa,qa,ra,sa,ta,ua=false,va=[],wa;function xa(ub,vb,wb){var xb=0;if(vb)xb+=vb.getHeight();if(!cb()&&!xb)return;ub-=xb;var yb=0;for(var zb=0;zb<wb;zb++)yb+=lb(zb);if(vb)if(ub<yb){ub+=vb.fold(yb-ub);}else if(ub>yb)ub-=vb.unfold(ub-yb);return ub;}function ya(){var ub=da.cloneNode(true);ub.id='';var vb=new j();vb.init(i.scry(ub,'div.ego_unit'));var wb=true;vb.forEach(function(xb){if(wb){wb=false;}else i.remove(xb);});h.addClass(ub,'fixed_elem');return ub;}function za(){ga=undefined;if(!n.pageHasScrubber(ia)){db(ma);gb();}else if(pa){eb(da,false);var ub=qa;qa&&i.remove(qa);qa=ya();if(ub)rb();db(n.sidebarInitialized()&&ja?w:v);gb();if(!ka){var vb=n.getCurrentScrubber();if(vb)qb(vb.getRoot(),vb.getOffset());}ka&&ka.start();}else tb.adjustAdsToFit();}function ab(){if(qa){i.remove(qa);qa=null;}if(ka){ka.stop();ka=null;}if(cb()){h.conditionClass(da,'fixed_elem',!pa);h.conditionClass(da,"_22s",!n.pageHasScrubber(ia));}else h.conditionClass(da,'fixed_elem',!pa&&n.pageHasScrubber(ia));}function bb(ub){var vb=q.getViewportDimensions().y,wb=n.getCurrentScrubber(),xb=wb?wb.getOffset():m.SCRUBBER_DEFAULT_OFFSET,yb=vb-xb-x;if(wb||cb())return xa(yb,wb,ub);}function cb(){return n.fixedAds();}function db(ub){fa=Math.min(ub,ha.getCount());ha.forEach(function(vb,wb){eb(vb,wb>=fa);});eb(da,fa===0);}function eb(ub,vb){h.conditionClass(ub,"_22r",vb);ub.setAttribute('aria-hidden',vb?'true':'false');}function fb(ub){var vb=i.find(ha.getUnit(ub),"div._4u8"),wb=vb.getAttribute('data-ad');return JSON.parse(wb).adid;}function gb(){ib();hb();}function hb(){var ub;if(ga!==undefined){ub=ha.getHoldoutAdIDsForSpace(ga,mb);}else ub=ha.getHoldoutAdIDsForNumAds(fa);if(ub)ub.forEach(jb);}function ib(){if(!ra)return;for(var ub=fa-1;ub>=0;--ub){if(ka&&ka.isFixed()&&((ub!==0)||(qa&&!h.shown(qa))))continue;var vb=fb(ub);if(!ra[vb])return;jb(vb);}}function jb(ub){if(!ra[ub])return;var vb=i.create('iframe',{src:p('/ai.php').addQueryData({aed:ra[ub]}),width:0,height:0,frameborder:0,scrolling:'no',className:'fbEmuTracking'});vb.setAttribute('aria-hidden','true');i.appendContent(da,vb);delete ra[ub];}function kb(ub){var vb=0;while(ub>0&&vb<ma){ub-=lb(vb);if(ub>=0)vb++;}return vb;}function lb(ub){var vb=ha.getUnit(ub);if(!vb)return 0;return mb(vb);}function mb(ub){if(!ub.getAttribute(y))nb(ub);return parseInt(ub.getAttribute(y),10);}function nb(ub){ub.setAttribute(y,ub.offsetHeight);}function ob(){for(var ub=0;ub<ha.getCount();ub++){var vb=ha.getUnit(ub);if(!vb)continue;nb(vb);}}function pb(){var ub=i.scry(da,'div.ego_unit');ha.init(ub);var vb=ub.length;if(!vb)return;h.addClass(ha.getUnit(0),'ego_unit_no_top_border');na=vb;za();var wb=function(xb){nb(xb);na=--vb;tb.adjustAdsToFit();if(!na)la=Date.now();};ub.forEach(function(xb){function yb(){wb.curry(xb).defer();}var zb=i.scry(xb,'img.img')[0];if(!zb)return;if(zb.complete){yb();}else k.listen(zb,{load:yb,error:yb,abort:yb});});}function qb(ub,vb){ka=new l(ub,vb,function(wb){if(wb){rb();}else{i.remove(qa);gb();}});if(qa)ka.start();}function rb(){i.insertAfter(da,qa);sb();}function sb(){h.conditionShow(qa,lb(0)<=bb(1)&&!h.hasClass(document.documentElement,'tinyViewport'));}var tb={init:function(ub,vb,wb){if(ba)return;ma=wb.max_ads;ca=wb.refresh_delay;z=wb.refresh_threshold;ba=true;ea=vb;da=ub;tb.adjustAdsType(n.shouldShowWideAds());sa=g.subscribe(['UFI/CommentAddedActive','UFI/CommentDeletedActive','UFI/LikeActive','Curation/Action','ProfileBrowser/LoadMoreContent','Ads/NewContentDisplayed'],tb.loadAdsIfEnoughTimePassed);if(wb.refresh_collection_change)ta=g.subscribe('TimelineSideAds/refresh',tb.forceReloadAds);wa=t(tb.loadAdsIfEnoughTimePassed,ca,this,true);if(wb.mouse_move){va.push(k.listen(window,'mousemove',wa));va.push(k.listen(window,'scroll',wa));va.push(k.listen(window,'resize',wa));}n.register(n.ADS,tb);},setShortMode:function(ub){pa=ub;},start:function(ub){ra=ub;oa=null;pb();},updateCurrentKey:function(ub){if(ub==ia)return;ia=ub;ab();},loadAds:function(ub){if(na||oa)return;la=Infinity;oa=o.loadFromEndpoint('WebEgoPane',da.id,{pid:33,data:[ea,'timeline_'+ub,pa?w:ma,++aa,false]},{crossPage:true,bundle:false});},registerScrubber:function(ub){if(pa)qb(ub.getRoot(),ub.getOffset());!oa&&tb.adjustAdsToFit();},loadAdsIfEnoughTimePassed:function(){if(z&&(Date.now()-la>=z)&&!h.hasClass(document.documentElement,'tinyViewport')&&(!ka||ka.isFixed())&&(!ra||!ra[fb(0)]))tb.loadAds(ia);tb.adjustAdsToFit();},forceReloadAds:function(){tb.loadAds(ia);},adjustAdsType:function(ub){if(ub!=ja){h.conditionClass(da,"_22q",!ub);h.conditionClass(da,"_35q",!ub);qa&&h.conditionClass(qa,"_22q",!ub);qa&&h.conditionClass(qa,"_35q",!ub);ja=ub;ob();tb.adjustAdsToFit();var vb=u('rightColContent');if(vb)h.conditionClass(vb,'fbTimelineWideRightCol',ub);}},adjustAdsToFit:function(){if(!da||ua)return;ua=true;var ub=ja?w:v;if(pa){if(ka&&qa){ka.handleScroll();if(ka.isFixed()){h.conditionShow(qa,lb(0)<=bb(1)&&!h.hasClass(document.documentElement,'tinyViewport'));}else db(ub);gb();}}else{var vb=bb(ub);if(typeof vb!=='undefined'){ga=vb;db(kb(vb));if(!na)gb();}}ua=false;},reset:function(){ka&&ka.stop();oa&&oa.cancel();ha=new j();ja=false;da=null;ka=null;oa=null;aa=0;na=null;pa=null;qa=null;ia=null;la=Infinity;ba=false;sa&&g.unsubscribe(sa);sa=null;ta&&g.unsubscribe(ta);ta=null;va.forEach(function(ub){ub.remove();});va=[];wa&&wa.reset();}};e.exports=a.TimelineSideAds||tb;});
__d("TimelineStickyHeader",["Animation","Arbiter","Bootloader","CSS","DOM","Style","TimelineController","TimelineURI","Vector","ViewportBounds","$","ge","queryThenMutateDOM"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Arbiter'),i=b('Bootloader'),j=b('CSS'),k=b('DOM'),l=b('Style'),m=b('TimelineController'),n=b('TimelineURI'),o=b('Vector'),p=b('ViewportBounds'),q=b('$'),r=b('ge'),s=b('queryThenMutateDOM'),t=200,u=false,v=false,w,x,y,z,aa,ba,ca={},da={VISIBLE:'TimelineStickyHeader/visible',ADJUST_WIDTH:'TimelineStickyHeader/adjustWidth',init:function(ea){if(u)return;u=true;w=ea;x=k.find(ea,'div.name');y=k.find(ea,'div.actions');v=j.hasClass(ea,'fbTimelineStickyHeaderVisible');var fa=q('blueBar'),ga,ha=false;s(function(){if(fa.offsetTop&&!r('page_admin_panel')&&m.getCurrentKey()!==n.TIMELINE_KEY){ga=o.getElementDimensions(fa).y;ha=true;}},function(){if(ha){i.loadModules(['StickyController'],function(ia){new ia(ea,ga).start();});}else j.addClass(ea,'fixed_elem');s(function(){aa=ea.offsetTop;ba=ea.scrollHeight;},function(){z=p.addTop(function(){return v?aa+ba:0;});},'TimelineStickyHeader/init');m.register(m.STICKY_HEADER,da);},'TimelineStickyHeader/init');},reset:function(){u=false;v=false;w=null;x=null;y=null;ca={};z.remove();z=null;},toggle:function(ea){if(ea!==v){var fa=ea?aa-ba:aa,ga=ea?aa:aa-ba;l.set(w,'top',fa+'px');j.addClass(w,'fbTimelineStickyHeaderAnimating');var ha=k.getID(w);ca[ha]&&ca[ha].stop();ca[ha]=new g(w).from('top',fa).to('top',ga).duration(t).ondone(function(){ca[ha]=null;j.conditionClass(w,'fbTimelineStickyHeaderHidden',!ea);w.setAttribute('aria-hidden',ea?'false':'true');j.removeClass(w,'fbTimelineStickyHeaderAnimating');l.set(w,'top','');h.inform(da.VISIBLE,ea);}).go();v=ea;}},adjustWidth:function(){h.inform(da.ADJUST_WIDTH,x,h.BEHAVIOR_STATE);},getRoot:function(){return w;},setActions:function(ea){if(u&&ea){k.setContent(y,ea);y=ea;}}};e.exports=a.TimelineStickyHeader||da;});
__d("ButtonGroup",["function-extensions","copyProperties","createArrayFrom","CSS","DataStore","Parent"],function(a,b,c,d,e,f){b('function-extensions');var g=b('copyProperties'),h=b('createArrayFrom'),i=b('CSS'),j=b('DataStore'),k=b('Parent'),l='firstItem',m='lastItem';function n(s,t){var u=k.byClass(s,t);if(!u)throw new Error('invalid use case');return u;}function o(s){return i.shown(s)&&h(s.childNodes).some(i.shown);}function p(s){var t,u,v;h(s.childNodes).forEach(function(w){v=o(w);i.removeClass(w,l);i.removeClass(w,m);i.conditionShow(w,v);if(v){t=t||w;u=w;}});t&&i.addClass(t,l);u&&i.addClass(u,m);i.conditionShow(s,t);}function q(s,t){var u=n(t,'uiButtonGroupItem');s(u);p(u.parentNode);}function r(s){this._root=n(s,'uiButtonGroup');j.set(this._root,'ButtonGroup',this);p(this._root);}r.getInstance=function(s){var t=n(s,'uiButtonGroup'),u=j.get(t,'ButtonGroup');return u||new r(t);};g(r.prototype,{hideItem:q.curry(i.hide),showItem:q.curry(i.show),toggleItem:q.curry(i.toggle)});e.exports=r;});
__d("TimelineStickyHeaderNav",["Event","function-extensions","Arbiter","ButtonGroup","CSS","DOM","Parent","SelectorDeprecated","Style","SubscriptionsHandler","TimelineConstants","TimelineController","TimelineLegacySections","URI","UserAgent","Vector","ge","tx"],function(a,b,c,d,e,f){var g=b('Event');b('function-extensions');var h=b('Arbiter'),i=b('ButtonGroup'),j=b('CSS'),k=b('DOM'),l=b('Parent'),m=b('SelectorDeprecated'),n=b('Style'),o=b('SubscriptionsHandler'),p=b('TimelineConstants'),q=b('TimelineController'),r=b('TimelineLegacySections'),s=b('URI'),t=b('UserAgent'),u=b('Vector'),v=b('ge'),w=b('tx'),x=false,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja={},ka={},la=[],ma=false,na=[],oa=[],pa,qa=["January","February","March","April","May","June","July","August","September","October","November","December"];function ra(){var fb=m.getSelectorMenu(da);pa.addSubscriptions(g.listen(fb,'click',sa),h.subscribe(p.SECTION_LOADED,wa));}function sa(event){var fb=l.byTag(event.getTarget(),'a');if(fb){var gb=fb.getAttribute('data-key');q.headerNavWasClicked(gb);q.navigateToSection(gb);event.prevent();}}function ta(fb,gb){var hb=m.getValue(gb);if(hb==='allStories')r.get(fb).expandSubSections();if(hb!=='activityLog')ua(gb);}function ua(fb){db(fb,'highlights');db(fb,'allStories');var gb=k.find(fb,'li.separator');j.conditionShow(gb,gb.previousSibling);}function va(fb){if(ga[fb]&&!z.custom_subsection_menu){ab(fb);}else xa();q.adjustStickyHeaderWidth();}function wa(fb,gb){var hb=gb.key;if(ha[hb]){bb(hb);va(hb);}}function xa(){ba.hideItem(ea);}function ya(fb){var gb=fb.split('_');return qa[gb.pop()-1];}function za(fb){var gb=fa[fb],hb=ga[fb];if(!gb&&hb){gb=fa[fb]=ea.cloneNode(true);var ib=k.scry(gb,'li.activityLog a')[0];if(ib)ib.href=s(ib.href).addQueryData({key:fb});var jb=q.getCurrentScrubber();if(hb.length)j.show(k.find(gb,'li.separator'));for(var kb=0;kb<hb.length;kb++){var lb=hb[kb].scrubberKey,mb=jb?jb.getLabelForSubnav(hb[kb].parentKey,lb):mb=ya(lb);if(mb)cb(gb,{key:lb,label:mb});}pa.addSubscriptions(m.listen(gb,'change',ta.curry(fb,gb)),g.listen(gb,'click',sa));}return gb;}function ab(fb){var gb=za(fb);k.insertAfter(ea,gb);j.hide(ea);for(var hb in fa){var ib=fa[hb];j.conditionShow(ib,ib===gb);}ba.showItem(ea);}function bb(fb){ga[fb]=r.get(fb).subSections;}function cb(fb,gb){var hb=k.create('a',{href:'#',rel:'ignore',className:'itemAnchor',tabIndex:0},k.create('span',{className:'itemLabel fsm'},gb.label));hb.setAttribute('data-key',gb.key);hb.setAttribute('aria-checked',false);var ib=k.create('li',{className:'uiMenuItem uiMenuItemRadio uiSelectorOption'},hb);ib.setAttribute('data-label',gb.label);var jb=k.find(fb,'ul.uiMenuInner'),kb=k.create('option',{value:gb.key},gb.label),lb=k.find(fb,'select');if(gb.key==='recent'){k.prependContent(jb,ib);k.insertAfter(lb.options[0],kb);}else{k.appendContent(jb,ib);k.appendContent(lb,kb);}}function db(fb,gb){var hb=k.scry(fb,'li.uiMenuItem');if(!hb)return;for(var ib=0;ib<hb.length;ib++){var jb=hb[ib];if(j.hasClass(jb,gb)||jb.firstChild.getAttribute('data-key')==gb){k.remove(jb);break;}}var kb=k.find(fb,'select'),lb=k.scry(kb,'option');for(ib=0;ib<lb.length;ib++)if(lb[ib].value===gb){k.remove(lb[ib]);return;}}var eb={init:function(fb,gb){if(x)return;x=true;y=fb;z=gb||{};ca=k.find(y,'div.pageMenu');da=k.find(y,'div.sectionMenu');ea=k.find(y,'div.subsectionMenu');ia=k.find(ca,'li.uiMenuSeparator');ba=i.getInstance(ca);pa=new o();fa={};ga={};ha={};eb.adjustMenuHeights();ra();q.register(q.STICKY_HEADER_NAV,eb);oa.forEach(function(hb){hb();});},reset:function(){x=false;z={};la=[];ja={};ka={};ma=false;na=[];y=null;ca=null;da=null;ea=null;ia=null;fa={};ga={};ha={};pa.release();},addTimePeriod:function(fb){var gb=q.getCurrentScrubber();if(!gb)return;var hb=gb.getLabelForNav(fb);if(!hb)return;cb(da,{key:fb,label:hb});var ib=k.find(da,'ul.uiMenuInner');if(fb==='recent'||ib.children.length<2)m.setSelected(da,fb,true);},updateSection:function(fb,gb){if(gb){var hb=za(fb);if(hb){m.setSelected(hb,gb);ua(hb);}else aa=fb;}else{ha[fb]=true;bb(fb);}m.setSelected(da,fb,true);va(fb);},adjustMenuHeights:function(){if(t.ie()<=7)return;[ca,da].forEach(function(fb){var gb='';if(!j.hasClass(document.documentElement,'tinyViewport')){gb=u.getViewportDimensions().y-u.getElementDimensions(v('blueBar')).y-80;gb+='px';}n.set(k.find(fb,'ul.uiMenuInner'),'maxHeight',gb);});},initPageMenu:function(fb,gb){if(!x){oa.push(eb.initPageMenu.curry(fb,gb));return;}function hb(ib,jb){ib.forEach(function(kb){var lb=ka[kb]=k.create('li');j.hide(lb);jb?k.insertBefore(ia,lb):k.appendContent(k.find(ca,'ul.uiMenuInner'),lb);});}hb(fb,true);hb(gb,false);ja.info=k.scry(ca,'li')[0];la=gb;ma=true;if(na.length)na.forEach(function(ib){eb.registerPageMenuItem(ib.key,ib.item);});},registerPageMenuItem:function(fb,gb){if(!ma){na.push({key:fb,item:gb});return;}if(ka[fb]){k.replace(ka[fb],gb);ja[fb]=gb;delete ka[fb];if(la.indexOf(fb)>=0)j.show(ia);}},removeTimePeriod:function(fb){db(da,fb);}};e.exports=eb;});
__d("TimelineOGCollectionReportGrid",["CSS","OGCollectionAddObject"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('OGCollectionAddObject'),i={init:function(j,k){h.subscribe([h.NEW_ITEM,h.PLACEHOLDER],i.hideOverflowNodes.curry(j,k));},hideOverflowNodes:function(j,k,l,m){if(m.grid!=j)return;for(var n=0;n<j.childNodes.length;n++)g.conditionShow(j.childNodes[n],n<k);}};e.exports=i;});
__d("TimelineScrubber",["Event","CSS","DOM","Focus","Keys","Parent","TimelineController","Vector","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('CSS'),i=b('DOM'),j=b('Focus'),k=b('Keys'),l=b('Parent'),m=b('TimelineController'),n=b('Vector'),o=b('copyProperties');function p(q){this._root=q;this._navKeys={};this._subNavKeys={};this._rollups={};this._rolledup={};var r=q.childNodes;this._currentNav=r[0];for(var s=0;s<r.length;s++){var t=r[s].getAttribute('data-key');this._navKeys[t]=r[s];var u=i.scry(r[s],'ul');this._subNavKeys[t]={};if(u.length){var v=u[0].childNodes;for(var w=0;w<v.length;w++)this._subNavKeys[t][v[w].getAttribute('data-key')]=v[w];}var x=r[s].getAttribute('data-rollup');if(x){this._rollups[x]=this._rollups[x]||[];this._rollups[x].push(r[s]);}}this._clickListener=g.listen(this._root,'click',this._handleScrub.bind(this));this._focusHandler=g.listen(this._root,'keydown',this._moveFocus.bind(this));this._tabbableElement=i.scry(this._root,'a')[0];h.show(this._root);var y=n.getViewportDimensions().y-this.SCRUBBER_NO_ADS_VERTICAL_BUFFER,z=this.getHeight();if(z>y)this.fold(z-y);m.register(m.SCRUBBER,this);m.scrubberHasLoaded(this);}o(p.prototype,{KEY_HEIGHT:23,SUBKEY_HEIGHT:16,OFFSET:38,SCRUBBER_NO_ADS_VERTICAL_BUFFER:125,reset:function(){this._root=null;this._navKeys={};this._subNavKeys={};this._rollups={};this._rolledup={};},getRoot:function(){return this._root;},getNav:function(q){return this._navKeys[q];},getSubnav:function(q,r){return this._subNavKeys[q][r];},getHeight:function(){return this._root.offsetHeight;},getLabelForNav:function(q){var r=this.getNav(q);return r&&i.getText(i.scry(r,'a')[0]);},getLabelForSubnav:function(q,r){var s=this.getSubnav(q,r);return s&&i.getText(i.scry(s,'a')[0]);},fold:function(q){return this._adjustFolding(q,true);},unfold:function(q){return this._adjustFolding(q,false);},getOffset:function(){return this.OFFSET+(h.hasClass(document.body,'hasVoiceBar')?26:0)+(h.hasClass('rightColContent','pagesTimelineRightColumn')?48:0);},updateSection:function(q,r){if(!this._navKeys[q])return;var s=this._navKeys[q].getAttribute('data-rollup');if(this._currentRollup&&this._currentRollup!=s){h.removeClass(this._currentRollup,'selected');h.removeClass(i.scry(this._currentRollup,'ul')[0],'loaded');delete this._currentRollup;}if(s&&this._rolledup[s]){var t=this._rolledup[s];if(t.getAttribute('data-rollup')){this._currentRollup=t;h.addClass(this._currentRollup,'selected');h.addClass(i.scry(this._currentRollup,'ul')[0],'loaded');}}this._currentNav&&h.removeClass(this._currentNav,'selected');this._currentSubNav&&h.removeClass(this._currentSubNav,'selected');this._currentNav=null;this._currentSubNav=null;if(this._navKeys[q]){this._currentNav=this._navKeys[q];h.addClass(this._currentNav,'selected');if(this.decadesAreSelectable&&this._navKeys[r]){this._currentSubNav=this._navKeys[r];h.addClass(this._currentSubNav,'selected');}else if(r&&this._subNavKeys[q][r]){this._currentSubNav=this._subNavKeys[q][r];h.addClass(this._currentSubNav,'selected');}}},_getRollupSize:function(q){var r=this._currentNav,s=r&&r.getAttribute('data-rollup'),t=this.KEY_HEIGHT*(this._rollups[q].length-1);if(q==s){t+=this.SUBKEY_HEIGHT*i.scry(r,'li').length;t-=this.SUBKEY_HEIGHT*(this._rollups[q].length-1);}return t;},_adjustFolding:function(q,r){var s=q,t=Object.keys(this._rollups);while(q>0&&t.length){var u=t[r?'pop':'shift']();if(!r==!this._rolledup[u])continue;var v=this._getRollupSize(u);if(v<=0)continue;if(!r&&v>q)break;this[r?'_collapseRollup':'_expandRollup'](u);q-=v;}return s-q;},_collapseRollup:function(q){var r=this._rollups[q];if(!r||r.length<2||this._rolledup[q])return;var s=r[0].previousSibling,t=r[0],u=i.create('a',{href:t.firstChild.href,rel:'ignore',tabindex:'-1'},[q]),v=i.create('ul',{className:'clearfix'});for(var w=0;w<r.length;w++)v.appendChild(r[w]);var x=i.create('li',null,[u,v]);if(this.decadesAreSelectable){var y=r[r.length-1],z=t.getAttribute('data-key')+y.getAttribute('data-key');x.setAttribute('data-start',y.getAttribute('data-start'));x.setAttribute('data-end',t.getAttribute('data-end'));x.setAttribute('data-key',z);this._navKeys[z]=x;}else x.setAttribute('data-key',t.getAttribute('data-key'));x.setAttribute('data-rollup',q);if(s){i.insertAfter(s,x);}else i.prependContent(this._root,x);this._rolledup[q]=x;this._checkSelection();this._ensureFocusableElementIsVisible();},_expandRollup:function(q){if(!this._rolledup[q])return;var r=this._rolledup[q],s=i.scry(r,'ul')[0],t=document.createDocumentFragment();while(s.childNodes.length)t.appendChild(s.firstChild);i.replace(r,t);this._rolledup[q]=false;this._checkSelection();},_checkSelection:function(){if(this._currentNav){var q=this._currentSubNav&&this._currentSubNav.getAttribute('data-key');this.updateSection(this._currentNav.getAttribute('data-key'),q);}},_handleScrub:function(event){var q=event.getModifiers();if(event.isMiddleClick()||q.access||q.meta)return true;var r=l.byTag(event.getTarget(),'a'),s=r&&l.byAttribute(r,'data-key');if(s){m.scrubberWasClicked(s.getAttribute('data-key'));m.navigateToSection(s.getAttribute('data-key'));return event.prevent();}},_ensureFocusableElementIsVisible:function(){while(!(this._tabbableElement.offsetHeight||this._tabbableElement.offsetWidth)){this._tabbableElement.tabIndex=-1;var q=l.byTag(l.byTag(this._tabbableElement,'li'),'li');this._tabbableElement=i.scry(q,'a')[0];this._tabbableElement.tabIndex=0;}},_moveFocus:function(event){if(event.getModifiers().any)return;var q=g.getKeyCode(event);if(q===k.UP||q===k.DOWN){var r=i.scry(this._root,'a').filter(function(u){return u.offsetHeight||u.offsetWidth;}),s=r.indexOf(this._tabbableElement);if(s!=-1){var t=r[s+(q===k.UP?-1:1)];if(t){t.tabindex=0;j.set(t);this._tabbableElement.tabindex=-1;this._tabbableElement=t;event.prevent();}}}}});e.exports=p;});
__d("TimelineMainScrubber",["Arbiter","Class","CSS","DOMQuery","TimelineConstants","TimelineController","TimelineScrubber","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Class'),i=b('CSS'),j=b('DOMQuery'),k=b('TimelineConstants'),l=b('TimelineController'),m=b('TimelineScrubber'),n=b('copyProperties');function o(p){this.parent.construct(this,p);this._subscribe=g.subscribe(k.SECTION_LOADED,function(q,r){var s=this._navKeys[r.key],t=s&&j.scry(s,'ul')[0];if(t){i.addClass(t,'loaded');l.scrubberHasChangedState();if(r.hideSubSections)i.hide(t);}}.bind(this));}h.extend(o,m);n(o.prototype,{reset:function(){this.parent.reset();this._subscribe&&this._subscribe.unsubscribe();}});e.exports=o;});
__d("legacy:TimelineMainScrubber",["TimelineMainScrubber"],function(a,b,c,d){a.TimelineMainScrubber=b('TimelineMainScrubber');},3);
__d("legacy:TimelineCover",["TimelineCover"],function(a,b,c,d){a.TimelineCover=b('TimelineCover');},3);
__d("legacy:ui-scrolling-pager-js",["ScrollingPager"],function(a,b,c,d){a.ScrollingPager=b('ScrollingPager');},3);
__d("OnlyMeUI",["AudienceSelector","Arbiter","CSS","DOM","Parent","PrivacyConst","SelectorDeprecated","$","tx"],function(a,b,c,d,e,f){var g=b('AudienceSelector'),h=b('Arbiter'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('PrivacyConst'),m=b('SelectorDeprecated'),n=b('$'),o=b('tx');function p(){return [j.create('div',{className:'onlyMeBorder'}),j.create('div',{className:'onlyMeBorder onlyMeBorderBottom'})];}function q(){return j.create('img',{alt:' ',className:'onlyMePrivacyCorner',height:34,src:'/images/profile/timeline/privacy_corner.png',width:34});}function r(x){var y=j.scry(x,'.photoUnit a.photo');return y.filter(function(z){return !j.scry(z,'.onlyMePrivacyCorner').length;});}function s(x,y){if(g.hasTags(u(y)))return;if(i.hasClass(x,'storyContent'))if(!k.byClass(x,'onlyMeWrap')){var z=j.create('div',{className:'onlyMeWrap'});j.appendContent(k.byClass(x,'uiStreamStory'),z);j.appendContent(z,x);x=z;}else x=k.byClass(x,'onlyMeWrap');i.addClass(x,'storyOnlyMe');if(!i.hasClass(x,'timelineRecentActivityStory'))j.setContent(j.find(y,'span.uiButtonText'),"Only Me");if(!i.hasClass(x,'storyContent')){var aa=r(x);for(var ba=0,ca=aa.length;ba<ca;++ba)j.appendContent(aa[ba],q());}if(!j.scry(x,'div.onlyMeBorder').length){var da=p();j.prependContent(x,da[0]);j.appendContent(x,da[1]);}}function t(x){if(!x)return;var y=k.byClass(x,'storyContent')||k.byClass(x,'timelineRecentActivityStory')||k.byClass(x,'timelineUnitContainer')||k.byClass(x,'fbTimelineTwoColumn');if(!y){y=j.scry(x,'^.permalink_stream .storyContent');y=y.length&&y[0];}else if(i.hasClass(y,'fbTimelineComposerUnit'))return null;return y;}function u(x){var y=j.scry(x,'*[data-oid]');if(y.length===0)return '';return y[0].getAttribute('data-oid');}var v=false,w={init:function(){if(v)return;v=true;h.subscribe('AudienceSelector/changed',function(x,y){if(y.selector&&i.hasClass(y.selector,'blacklistOnlyMeUI'))return;var z=t(y.selector)||t(y.clone);if(!z)return;if(m.getOptionValue(y.option)==l.BaseValue.SELF){s(z,y.selector);}else{z=i.hasClass(z,'storyContent')?k.byClass(z,'onlyMeWrap'):z;z&&i.removeClass(z,'storyOnlyMe');}});},setOnlyMe:function(x){if(v)return;w.init();x=j.find(k.byClass(n(x),'uiSelector'),'a.uiSelectorButton');var y=t(x);y&&s(y,x);}};e.exports=w;});
__d("ButtonGroupMonitor",["ContextualDialog","ContextualLayer","CSS","Layer","Parent","SelectorDeprecated"],function(a,b,c,d,e,f){var g=b('ContextualDialog'),h=b('ContextualLayer'),i=b('CSS'),j=b('Layer'),k=b('Parent'),l=b('SelectorDeprecated');function m(n){var o=k.byClass(n,'bg_stat_elem')||k.byClass(n,'uiButtonGroup');o&&i.toggleClass(o,'uiButtonGroupActive');}j.subscribe(['hide','show'],function(n,o){if(o instanceof h||o instanceof g)m(o.getCausalElement());});l.subscribe(['close','open'],function(n,o){m(o.selector);});});
__d("CountButtonCountDEPRECATED",["ArbiterMixin","copyProperties","DOM"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('copyProperties'),i=b('DOM');function j(k,l,m){this._root=k;this._count=l;this._max=m;}h(j.prototype,g,{getCount:function(){return this._count;},setCount:function(k){this._count=k;var l=this.getDisplayedValue();i.setContent(this._root,l);this.inform('change',{value:this._count,max:this._max,display:l});return this;},addCount:function(k){this.setCount(this.getCount()+k);return this;},getDisplayedValue:function(k){var l=(this._count>this._max)?'+':'';return Math.max(0,Math.min(this._count,this._max))+l;}});e.exports=j;});
__d("CountButtonDEPRECATED",["copyProperties","CSS","cx"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('CSS'),i=b('cx'),j={huge:"_4q9",large:"_9x",small:"_9w",hidden:"_9v"};function k(l,m){this._root=l;this._counter=m;this._initEvents();}g(k.prototype,{_initEvents:function(){this._counter.subscribe('change',this._counterChange.bind(this));},_counterChange:function(l,m){h.removeClass(this._root,j.huge);h.removeClass(this._root,j.large);h.removeClass(this._root,j.small);h.removeClass(this._root,j.hidden);var n=m.count>m.max;if(n&&m.max>9){h.addClass(this._root,j.huge);}else if(m.value>9||(n&&m.max>0)){h.addClass(this._root,j.large);}else if(m.value>0){h.addClass(this._root,j.small);}else h.addClass(this._root,j.hidden);},getCounter:function(){return this._counter;}});e.exports=k;});
__d("SubMenu",["Event","Arbiter","copyProperties","CSS"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('copyProperties'),j=b('CSS');function k(){}i(k.prototype,{_subMenu:null,_mainMenu:null,_forward:null,_backward:null,init:function(l,m,n,o){this._subMenu=l;this._mainMenu=m;this._forward=n;this._backward=o;h.subscribe('SubMenu/Reset',this._goToMainMenu.bind(this));g.listen(n,'click',this._goToSubMenu.bind(this));g.listen(o,'click',this._goToMainMenu.bind(this));},initAsyncChildMenu:function(l){g.listen(this._forward,'click',function(){this._goToSubMenu();l.load();}.bind(this));},_goToMainMenu:function(){j.hide(this._subMenu);j.show(this._mainMenu);},_goToSubMenu:function(){j.hide(this._mainMenu);j.show(this._subMenu);}});e.exports=k;});
__d("legacy:ui-submenu",["SubMenu"],function(a,b,c,d){a.SubMenu=b('SubMenu');},3);
__d("AsyncMenu",["AsyncRequest","copyProperties","emptyFunction"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('copyProperties'),i=b('emptyFunction');function j(k,l){this._uri=k;this._elem=l;}h(j.prototype,{_uri:null,_elem:null,load:function(){this.load=i;g.bootstrap(this._uri,this._elem);}});e.exports=j;});