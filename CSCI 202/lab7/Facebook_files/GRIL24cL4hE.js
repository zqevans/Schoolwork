/*1368481485,173214271*/

if (self.CavalryLogger) { CavalryLogger.start_js(["mjmJ9"]); }

__d("SubscriptionLevels",[],function(a,b,c,d,e,f){var g={ALL:'162318810514679',DEFAULT:'271670892858696',TOP:'266156873403755'};e.exports=g;});
__d("EditSubscriptions",["Event","function-extensions","Arbiter","AsyncRequest","CSS","DOM","MenuDeprecated","Parent","SubscriptionLevels","arrayContains","cx","ge"],function(a,b,c,d,e,f){var g=b('Event');b('function-extensions');var h=b('Arbiter'),i=b('AsyncRequest'),j=b('CSS'),k=b('DOM'),l=b('MenuDeprecated'),m=b('Parent'),n=b('SubscriptionLevels'),o=b('arrayContains'),p=b('cx'),q=b('ge'),r=13,s=45,t=[n.ALL,n.DEFAULT,n.TOP],u={},v={},w={},x={},y={},z={},aa={},ba={},ca={},da={},ea={},fa="/ajax/follow/follow_profile.php",ga="/ajax/follow/unfollow_profile.php",ha="/ajax/settings/notifications/notify_me.php",ia={},ja={},ka=null,la=false;function ma(jb){return o(t,jb);}function na(jb,kb,lb,mb){var nb=m.byClass(mb,'uiMenuItem')||m.byClass(mb,"_54ni");if(!nb||!k.contains(jb,nb)){return;}else if(j.hasClass(nb,'SubscribeMenuSubscribeCheckbox')){if(w[kb]){qa(jb,kb);}else pa(jb,kb);return false;}else if(j.hasClass(nb,'SubscribeMenuUnsubscribe')){qa(jb,kb);return false;}else if(j.hasClass(nb,'SubscribeMenuSettingsItem')){db(jb,true);return false;}else if(j.hasClass(nb,'SubscriptionMenuGoBack')){db(jb,false);return false;}else if(j.hasClass(nb,'SubscriptionMenuItem')){oa(jb,kb,lb,nb);return false;}else if(j.hasClass(nb,'SubscribeMenuNotifyMeCheckbox')){if(x[kb]){hb(jb,kb);}else gb(jb,kb);return false;}}function oa(jb,kb,lb,mb){if(j.hasClass(mb,'SubscriptionMenuLevel')){if(l.isItemChecked(mb))return;bb(jb,kb,ua(mb),true,lb);}else if(j.hasClass(mb,'SubscriptionMenuCategory')){ya(kb,mb,!l.isItemChecked(mb),true,lb);}else if(j.hasClass(mb,'SubscriptionAppStory'))ab(kb,mb,!l.isItemChecked(mb),lb);}function pa(jb,kb){var lb={profile_id:kb};h.inform('FollowingUser',lb);new i().setURI(fa).setMethod('POST').setData({profile_id:kb,location:ra(jb)}).setErrorHandler(h.inform.curry('FollowUserFail',lb)).send();}function qa(jb,kb){var lb={profile_id:kb};h.inform('UnfollowingUser',lb);new i().setURI(ga).setMethod('POST').setData({profile_id:kb,location:ra(jb)}).setErrorHandler(h.inform.curry('UnfollowUserFail',lb)).send();}function ra(jb){if(j.hasClass(jb,'followButtonFlyout')){return r;}else return s;}function sa(jb,kb,lb){var mb={profile_id:jb,level:ba[jb],custom_categories:ca[jb],location:lb};new i().setURI('/ajax/follow/manage_subscriptions.php').setData(mb).send();}function ta(jb,kb){var lb=ca[kb]||[],mb=l.getItems(jb);mb.forEach(function(nb){if(j.hasClass(nb,'SubscriptionMenuCategory')){var ob=ua(nb);if(o(lb,ob)){wa(nb);}else xa(nb);}else if(j.hasClass(nb,'SubscriptionAppStory')){var pb=ua(nb);if(ja[kb]&&ja[kb][pb]){wa(nb);}else xa(nb);}});bb(jb,kb,ba[kb],false);}function ua(jb){var kb=k.scry(jb,'input')[0];return kb&&kb.value;}function va(jb){return k.find(jb,'a.itemAnchor');}function wa(jb){j.addClass(jb,'checked');va(jb).setAttribute('aria-checked',true);}function xa(jb){j.removeClass(jb,'checked');va(jb).setAttribute('aria-checked',false);}function ya(jb,kb,lb,mb,nb){if(lb){wa(kb);}else xa(kb);var ob=ua(kb);if(ma(ob)){lb&&za(jb,ob);}else if(lb){if(!o(ca[jb],ob))ca[jb].push(ob);}else{var pb=ca[jb].indexOf(ob);if(pb!==-1)ca[jb].splice(pb,1);}if(mb)sa(jb,ob,nb);}function za(jb,kb){ba[jb]=kb;h.inform('SubscriptionLevelUpdated',{profile_id:jb,level:kb});}function ab(jb,kb,lb,mb){var nb='/ajax/feed/filter_action/',ob=ua(kb),pb={actor_id:jb,app_id:ob};if(lb){wa(kb);nb+='resubscribe_user_app/';pb.action='resubscribe_user_app';if(!ja[jb])ja[jb]={};ja[jb][ob]=true;}else{xa(kb);nb+='unsubscribe_user_app_checkbox/';pb.action='unsubscribe_user_app_checkbox';if(ja[jb])ja[jb][ob]=false;}new i().setURI(nb).setData(pb).send();}function bb(jb,kb,lb,mb,nb){var ob=k.scry(jb,'.SubscriptionMenuLevel'),pb=null;ob.forEach(function(qb){if(ua(qb)==lb){pb=qb;}else if(l.isItemChecked(qb))ya(kb,qb,false,false);});pb&&ya(kb,pb,true,mb,nb);}function cb(jb,kb,lb){w[kb]=lb;j.conditionClass(jb,'isUnsubscribed',!lb);var mb=k.scry(jb,'li.SubscribeMenuSubscribeCheckbox');if(mb.length!==0){var nb=mb[0];if(lb){wa(nb);}else xa(nb);}}function db(jb,kb){j.conditionClass(jb,'subscriptionMenuOpen',kb);}function eb(jb,kb,lb){var mb=k.find(jb,".FriendListSubscriptionsMenu"),nb=k.find(mb,".uiMenuInner");if(ka!=null)ka.forEach(function(ob){nb.removeChild(ob);});lb.forEach(function(ob){nb.appendChild(ob);});ka=lb;}h.subscribe('UnfollowUser',function(jb,kb){if(da[kb.profile_id]){za(kb.profile_id,da[kb.profile_id]);ca[kb.profile_id]=ea[kb.profile_id].slice();}});h.subscribe('UpdateSubscriptionLevel',function(jb,kb){var lb=kb.profile_id+'',mb=kb.level+'';za(lb,mb);var nb;for(nb in u)if(u[nb]===lb){var ob=q(nb);ob&&bb(ob,lb,mb,false);}});function fb(jb,kb,lb){x[kb]=lb;var mb=z[kb]&&!la,nb=k.scry(jb,'li.SubscribeMenuNotifyMeCheckbox');if(nb.length!==0){var ob=nb[0];j.conditionShow(ob,!mb);j.conditionShow(k.find(jb,'li.SubscribeMenuNotifyMeCheckboxSeparator'),!mb);if(lb){wa(ob);}else xa(ob);}}function gb(jb,kb){var lb={profile_id:kb};h.inform('EnableNotifsForUser',lb);new i().setURI(ha).setMethod('POST').setData({notifier_id:kb,enable:true}).setErrorHandler(h.inform.curry('EnableNotifsForUserFail',lb)).send();}function hb(jb,kb){var lb={profile_id:kb};h.inform('DisableNotifsForUser',lb);new i().setURI(ha).setMethod('POST').setData({notifier_id:kb,enable:false}).setErrorHandler(h.inform.curry('DisableNotifsForUserFail',lb)).send();}var ib={init:function(jb,kb,lb){var mb=k.getID(jb);if(!u[mb])g.listen(jb,'click',function(nb){return na(jb,u[mb],lb,nb.getTarget());});if(lb===s&&ia[kb].length)eb(jb,kb,ia[kb]);if(ba[kb])ta(jb,kb);u[mb]=kb;j.conditionClass(jb,'NonFriendSubscriptionMenu',!v[kb]);j.conditionClass(jb,'cannotSubscribe',!y[kb]);j.conditionClass(jb,'noSubscriptionLevels',z[kb]&&!aa[kb]);j.conditionClass(jb,'noSubscribeCheckbox',!v[kb]&&!z[kb]);cb(jb,kb,w[kb]);fb(jb,kb,x[kb]);h.subscribe(['FollowUser','FollowingUser','UnfollowUserFail'],function(nb,ob){cb(jb,kb,true);}.bind(this));h.subscribe(['UnfollowUser','UnfollowingUser','FollowUserFail'],function(nb,ob){h.inform('SubMenu/Reset');cb(jb,kb,false);}.bind(this));h.subscribe(['EnableNotifsForUser','DisableNotifsForUserFail'],function(nb,ob){fb(jb,kb,true);}.bind(this));h.subscribe(['DisableNotifsForUser','EnableNotifsForUserFail'],function(nb,ob){fb(jb,kb,false);}.bind(this));h.subscribe('listeditor/friend_lists_changed',function(nb,ob){if(ob.notify_state){var pb=ob.added_uid?ob.added_uid:ob.removed_uid;fb(jb,pb,ob.notify_state.is_notified);}}.bind(this));db(jb,false);},getSubscriptions:function(jb){return {level:ba[jb],custom_categories:ca[jb]};},setSubscriptions:function(jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb){za(jb,pb+'');v[jb]=kb;w[jb]=lb;y[jb]=mb;z[jb]=nb;aa[jb]=ob;da[jb]=rb+'';ca[jb]=qb.map(String);ea[jb]=sb.map(String);ia[jb]=vb;x[jb]=tb;la=ub;}};e.exports=a.EditSubscriptions||ib;});
__d("legacy:EditSubscriptions",["SubscriptionLevels","EditSubscriptions"],function(a,b,c,d){a.SubscriptionLevels=b('SubscriptionLevels');a.EditSubscriptions=b('EditSubscriptions');},3);
__d("DynamicFriendListEducation",["Event","Arbiter","AsyncRequest","Dialog","PageTransitions","arrayContains","createArrayFrom","removeFromArray"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('Dialog'),k=b('PageTransitions'),l=b('arrayContains'),m=b('createArrayFrom'),n=b('removeFromArray'),o,p,q,r,s,t;function u(){q&&q.hide();r&&r.hide();}function v(y){n(p,y);u();s({accept_tag_education:true});}function w(){u();s({nux_cancel:true});}var x={init:function(y,z){o=y;p=m(z).map(String);k.registerHandler(function(){u();o=false;s=undefined;p=[];});},showDialog:function(y,z,aa){if(o&&l(p,y)){u();h.inform('DynamicFriendListEducation/dialogOpen',{uid:z,flid:y});s=aa;q=new j().setAsync(new i('/ajax/friends/lists/smart_list_education.php').setMethod('GET').setData({flid:y,uid:z}).setReadOnly(true)).setHandler(v.bind(this,y)).setCloseHandler(function(){h.inform('DynamicFriendListEducation/dialogClosed',{uid:z,flid:y});}).setCancelHandler(function(){h.inform('DynamicFriendListEducation/dialogCancel',{uid:z,flid:y});}).show();}else aa();},showContextualDialog:function(y,z,aa,ba){if(o&&l(p,y)){u();t=aa;s=ba;new i('/ajax/friends/lists/smart_list_contextual_education.php').setMethod('GET').setData({flid:y,uid:z}).setReadOnly(true).send();}else ba();},setContextualDialog:function(y,z,aa,ba){r=y;r.setContext(t);r.show();g.listen(z,'click',v.bind(this,ba));g.listen(aa,'click',w);}};e.exports=x;});
__d("FriendStatus",["function-extensions","Arbiter","AsyncRequest","arrayContains","copyProperties","createArrayFrom"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Arbiter'),h=b('AsyncRequest'),i=b('arrayContains'),j=b('copyProperties'),k=b('createArrayFrom');function l(p,q,r){this.id=p;this.update(q,r);}j(l.prototype,{update:function(p,q){p&&(this.status=p);if(q){this.lists=k(q).map(String);this._informListChange();}},isComplete:function(){return !!this.lists;},addToList:function(p){if(this.lists&&!i(this.lists,p))this.lists.push(p);this._informListChange();},removeFromList:function(p){if(this.lists){var q=this.lists.indexOf(p);q!==-1&&this.lists.splice(q,1);}this._informListChange();},updateList:function(p,q){q?this.addToList(p):this.removeFromList(p);},_informListChange:function(){g.inform('FriendListMembershipChange',{uid:this.id,lists:this.lists});}});j(l,{ARE_FRIENDS:1,INCOMING_REQUEST:2,OUTGOING_REQUEST:3,CAN_REQUEST:4});var m={},n={};function o(p,q,r){if(!m[r.uid]){m[r.uid]=new l(r.uid,p);}else m[r.uid].update(p);g.inform('FriendRequest/change',{uid:r.uid,status:p});}g.subscribe(['FriendRequest/cancel','FriendRequest/unfriend','FriendRequest/sendFail'],o.curry(l.CAN_REQUEST));g.subscribe(['FriendRequest/confirmFail'],o.curry(l.INCOMING_REQUEST));g.subscribe(['FriendRequest/cancelFail','FriendRequest/sent','FriendRequest/sending'],o.curry(l.OUTGOING_REQUEST));g.subscribe(['FriendRequest/confirm','FriendRequest/confirming'],o.curry(l.ARE_FRIENDS));j(l,{CLOSE_FRIENDS:null,ACQUAINTANCES:null,getFriend:function(p,q){if(m[p]&&m[p].isComplete()){q(m[p]);}else if(n[p]){n[p].push(q);}else{n[p]=[q];new h().setURI("/ajax/friends/status.php").setData({friend:p}).setHandler(function(r){var s=r.getPayload();l.initFriend.bind(l,p,s.status,s.lists).defer();}).send();}},initFriend:function(p,q,r){var s=m[p]||new l(p);s.update(s.status||q,s.lists||r);m[p]=s;n[p]&&n[p].forEach(function(t){t(s);});n[p]=null;},setSpecialLists:function(p){l.CLOSE_FRIENDS=p.close+'';l.ACQUAINTANCES=p.acq+'';}});e.exports=l;});
__d("FriendEditLists",["Arbiter","AsyncRequest","CSS","DOMQuery","DynamicFriendListEducation","EditSubscriptions","FriendStatus","MenuDeprecated","Parent","ScrollableArea","URI","$","arrayContains","copyProperties","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('CSS'),j=b('DOMQuery'),k=b('DynamicFriendListEducation'),l=b('EditSubscriptions'),m=b('FriendStatus'),n=b('MenuDeprecated'),o=b('Parent'),p=b('ScrollableArea'),q=b('URI'),r=b('$'),s=b('arrayContains'),t=b('copyProperties'),u=b('ge'),v=5,w={},x='/ajax/profile/removefriendconfirm.php',y='/ajax/friends/requests/cancel.php',z='/ajax/choose/',aa='/profile.php',ba='/ajax/report/social.php',ca,da;function ea(pa,qa,ra){var sa=w[pa.id],ta=function(ua){var va={action:ra?'add_list':'del_list',to_friend:sa.id,friendlists:[qa],source:ca};if(ua)t(va,ua);sa.updateList(qa,ra);var wa;if(ra&&qa==m.CLOSE_FRIENDS){wa=ha(pa,m.ACQUAINTANCES);if(n.isItemChecked(wa)){n.toggleItem(wa);ea(pa,m.ACQUAINTANCES,false);}}else if(ra&&qa==m.ACQUAINTANCES){wa=ha(pa,m.CLOSE_FRIENDS);if(n.isItemChecked(wa)){n.toggleItem(wa);ea(pa,m.CLOSE_FRIENDS,false);}}var xa={flid:qa,uid:sa.id},ya=ra?'FriendListHovercard/add':'FriendListHovercard/remove';g.inform(ya,xa);new h().setURI('/ajax/add_friend/action.php').setData(va).send();};if(ra){k.showDialog(qa,sa.id,ta);}else ta();}function fa(pa){var qa=j.scry(pa,'input')[0];return qa&&qa.value;}function ga(pa,qa,ra){var sa={uid:qa.id};new h().setURI(y).setMethod('POST').setData({friend:qa.id}).setHandler(g.inform.bind(g,'FriendRequest/cancel',sa)).setErrorHandler(g.inform.bind(g,'FriendRequest/cancelFail',sa)).setStatusElement(ra).send();}function ha(pa,qa){var ra=n.getItems(pa);for(var sa=0;sa<ra.length;sa++)if(fa(ra[sa])==qa)return ra[sa];return null;}function ia(pa,qa){var ra=n.getItems(pa);ra.forEach(function(sa){var ta=fa(sa),ua=s(qa.lists,ta);if(n.isItemChecked(sa)!==ua)n.toggleItem(sa);});}function ja(pa){var qa=n.getItems(pa),ra=!i.hasClass(pa,'followButtonFlyout')&&!i.hasClass(pa,'likeButtonFlyout'),sa=[],ta=[],ua=0,va=0;qa.forEach(function(ab){if(i.hasClass(ab,'neverHide')){i.removeClass(ab,'underShowMore');ua++;}else if(n.isItemChecked(ab)){sa.push(ab);}else if(i.hasClass(ab,'neverShow')||i.hasClass(ab,'FriendListCreateTrigger')||(!ra&&i.hasClass(ab,'friendOptionsOnly'))){i.addClass(ab,'underShowMore');va++;}else ta.push(ab);});var wa=v-ua,xa=sa.concat(ta),ya=va;xa.forEach(function(ab){if(i.hasClass(ab,'ShowMoreItem')){wa--;return;}if(wa){i.removeClass(ab,'underShowMore');wa--;}else{i.addClass(ab,'underShowMore');ya=true;}});i.conditionClass(pa,'hasMoreFriendListItems',ya);var za=j.scry(pa,'.FriendListMenuShowMore');za.forEach(function(ab){i.removeClass(ab,'FriendListMenuShowMore');});}function ka(pa,qa){i.conditionClass(pa,'FriendListMemorializedUser',qa);}function la(pa,qa){i.conditionClass(pa,'FriendListCannotSuggestFriends',!qa);}function ma(pa,qa){var ra=j.scry(pa,'.FriendListUnfriend')[0],sa=j.scry(pa,'.FriendListCancel')[0],ta=j.scry(pa,'.FriendListSuggestFriends')[0],ua=j.scry(pa,'.FriendListFriendship')[0],va=j.scry(pa,'.FriendListReportBlock')[0];if(sa)i.conditionShow(sa,qa.status==m.OUTGOING_REQUEST);if(ra){i.conditionShow(ra,qa.status==m.ARE_FRIENDS);var wa=da==='bd_friends_tab'||da==='bd_profile_button',xa=j.find(ra,'a');xa.setAttribute('rel',wa?'async-post':'dialog-post');xa.setAttribute('ajaxify',q(x).addQueryData({uid:qa.id,unref:da,no_confirm:wa}).toString());}else i.conditionClass(pa,'NoFriendListActionSeparator',!sa||qa.status!=m.OUTGOING_REQUEST);if(ta)j.find(ta,'a').setAttribute('href',q(z).addQueryData({type:'suggest_friends',newcomer:qa.id,ref:'profile_others_dropdown'}).toString());if(ua){i.conditionShow(ua,qa.status==m.ARE_FRIENDS);j.find(ua,'a').setAttribute('href',q(aa).addQueryData({and:qa.id}).toString());}if(va)j.find(va,'a').setAttribute('ajaxify',q(ba).addQueryData({content_type:0,cid:qa.id,rid:qa.id}).toString());}function na(pa,qa){var ra=j.scry(pa,'div.FriendListSubscriptionsMenu');if(ra.length!==0)l.init(pa,qa,45);}g.subscribe('FriendRequest/change',function(pa,qa){for(var ra in w){var sa=u(ra),ta=w[ra];if(sa&&ta&&ta.id==qa.uid){ia(sa,ta);ma(sa,ta);ja(sa);}}});n.subscribe('select',function(pa,qa){if(i.hasClass(qa.item,'ShowMoreItem')&&i.hasClass(qa.menu,'FriendListMenu')){i.addClass(qa.menu,'FriendListMenuShowMore');p.poke(qa.item);}});var oa={init:function(pa,qa,ra,sa,ta,ua){pa=r(pa);ca=ra;da=ua;if(!w[pa.id])n.subscribe('select',function(va,wa){if(j.contains(pa,wa.item))if(o.byClass(wa.item,'FriendListItem')){n.toggleItem(wa.item);var xa=fa(wa.item);ea(pa,xa,n.isItemChecked(wa.item));}else if(o.byClass(wa.item,'FriendListCancel')){ga(pa,w[pa.id],wa.item);}else if(o.byClass(wa.item,'FriendListUnfriend'))g.inform('FriendEditLists/unfriend');});i.addClass(pa,'async_saving');m.getFriend(qa,function(va){ka(pa,sa);la(pa,ta);ia(pa,va);ma(pa,va);w[pa.id]=va;ja(pa);na(pa,qa);i.removeClass(pa,'async_saving');}.bind(this));}};e.exports=a.FriendEditLists||oa;});
__d("FriendListFlyoutController",["Event","Arbiter","AsyncRequest","Button","ContextualLayer","CSS","DataStore","Dialog","DOM","DOMQuery","FriendEditLists","FriendStatus","Keys","Layer","LayerHideOnEscape","LayerTabIsolation","MenuDeprecated","Parent","ScrollableArea","Style","TabbableElements","UserAgent","cx","emptyFunction"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('Button'),k=b('ContextualLayer'),l=b('CSS'),m=b('DataStore'),n=b('Dialog'),o=b('DOM'),p=b('DOMQuery'),q=b('FriendEditLists'),r=b('FriendStatus'),s=b('Keys'),t=b('Layer'),u=b('LayerHideOnEscape'),v=b('LayerTabIsolation'),w=b('MenuDeprecated'),x=b('Parent'),y=b('ScrollableArea'),z=b('Style'),aa=b('TabbableElements'),ba=b('UserAgent'),ca=b('cx'),da=b('emptyFunction'),ea,fa,ga=null,ha=null,ia,ja,ka,la,ma,na,oa=1500,pa,qa=['uiButtonConfirm','uiButtonSpecial',"_42gz","_42g-","_4jy2","_51tl","_4jy1"],ra={init:function(tb,ub){ra.init=da;ea=tb;ea.subscribe('mouseenter',ab);ea.subscribe('mouseleave',ob);ea.subscribe('hide',cb);ea.enableBehavior(v);ea.enableBehavior(u);pa=ub;if(ga)o.setContent(ea.getContent(),[ga,ha]);var vb=function(wb){var xb=x.byClass(wb.getTarget(),'enableFriendListFlyout');if(xb)if(ia===xb){clearTimeout(la);}else{fa&&qb();nb(xb);}};g.listen(document.documentElement,{mouseover:vb,click:vb,keydown:function(event){var wb=event.getTarget();if(event.getModifiers().any)return;if(!fa||p.isNodeOfType(wb,['input','textarea']))return;var xb=g.getKeyCode(event),yb;switch(xb){case s.UP:case s.DOWN:var zb=za();yb=xa(zb);va(zb[yb+(xb===s.UP?-1:1)]);return false;case s.SPACE:var ac=wa(wb);if(ac){sa(ac);event.prevent();}break;default:var bc=String.fromCharCode(xb).toLowerCase(),cc=za();yb=xa(cc);var dc=yb,ec=cc.length;while((~yb&&(dc=++dc%ec)!==yb)||(!~yb&&++dc<ec)){var fc=w.getItemLabel(cc[dc]);if(fc&&fc.charAt(0).toLowerCase()===bc){va(cc[dc]);return false;}}}}});h.subscribe('FriendEditLists/unfriend',qb);h.subscribe('DynamicFriendListEducation/dialogOpen',function(){na=true;});h.subscribe('DynamicFriendListEducation/dialogClosed',function(){na=false;ob();});},initContent:function(tb){o.appendContent(document.body,tb);db(tb);(function(){if(!ga){ga=tb;ea&&o.setContent(ea.getContent(),[ga,ha]);l.show(ga);g.listen(ga,'click',rb);fa&&kb(ia);}else{o.remove(tb);tb=null;}}).defer();},initNux:function(tb){if(ha)return;ha=tb;ea&&o.setContent(ea.getContent(),[ga,ha]);},show:function(tb){lb(tb);},hide:function(tb){tb===false?qb():ob();},setActiveNode:function(tb){fa&&qb();ia=tb;ja=g.listen(tb,'mouseleave',function(){ia=null;ja&&ja.remove();});},setCloseListener:function(tb,ub){m.set(tb,'flfcloselistener',ub);if(ia!=tb)m.set(tb,'flfcloselistenertimeout',sb.curry(tb).defer(oa));},setCloseListenerTimeout:function(tb){oa=tb;}};function sa(tb){ba.firefox()&&ua(tb).blur();w.inform('select',{menu:ta(tb),item:tb});}function ta(tb){if(l.hasClass(tb,'uiMenuContainer'))return tb;return x.byClass(tb,'uiMenu');}function ua(tb){return p.find(tb,'a.itemAnchor');}function va(tb){if(tb&&ya(tb)){w._removeSelected(ea.getContent());l.addClass(tb,'selected');ua(tb).focus();}}function wa(tb){return x.byClass(tb,'uiMenuItem');}function xa(tb){if(document.activeElement){var ub=wa(document.activeElement);return tb.indexOf(ub);}return -1;}function ya(tb){return !l.hasClass(tb,'disabled')&&z.get(tb,'display')!=='none'&&z.get(x.byClass(tb,'uiMenu'),'display')!=='none';}function za(){return w.getItems(ea.getContent()).filter(ya);}function ab(){clearTimeout(la);}function bb(tb){for(var ub=0;ub<qa.length;ub++)if(l.hasClass(tb,qa[ub]))return false;return true;}function cb(){if(ia){if(bb(ia)){l.removeClass(ia,"_52nd");if(l.hasClass(ia,'uiButton')||l.hasClass(ia,"_42fu"))l.removeClass(ia,'selected');}if(m.get(ia,'flfcloselistener')){var tb=ia;m.set(ia,'flfcloselistenertimeout',sb.curry(tb).defer(oa));}}fa=false;jb();ia=null;}function db(tb){var ub=p.scry(tb,'[tabindex="0"]');ub.forEach(function(vb){vb.tabIndex='-1';});ub[0]&&(ub[0].tabIndex='0');}function eb(tb){if(p.isNodeOfType(tb,'label')&&l.hasClass(tb,'uiButton'))tb=j.getInputElement(tb);return tb;}function fb(tb){return m.get(eb(tb),'profileid');}function gb(tb){return m.get(eb(tb),'memorialized')==='true';}function hb(tb){return m.get(eb(tb),'cansuggestfriends')==='true';}function ib(tb){return m.get(eb(tb),'unref');}function jb(){ja&&ja.remove();ja=null;ma&&t.unsubscribe(ma);ma=null;la&&clearTimeout(la);la=null;}function kb(tb){var ub=fb(tb),vb=gb(tb),wb=hb(tb),xb=m.get(tb,'flloc'),yb=ib(tb);q.init(ga,ub,xb,vb,wb,yb);l.conditionClass(ga,'followButtonFlyout',l.hasClass(tb,'profileFollowButton'));l.conditionClass(ga,'friendButtonFlyout',l.hasClass(tb,'FriendRequestFriends')||l.hasClass(tb,'FriendRequestIncoming')||l.hasClass(tb,'FriendRequestOutgoing'));l.conditionClass(ga,'likeButtonFlyout',l.hasClass(tb,'profileLikeButton'));var zb=p.scry(ga,'div.uiScrollableArea')[0];zb&&y.poke(zb);var ac=aa.find(ga)[0];ac&&ac.focus();}function lb(tb){if(!ea||fa)return;ea.setContext(tb);ea.setCausalElement(tb);tb.setAttribute('aria-expanded','true');if(bb(tb)){l.addClass(tb,"_52nd");if(l.hasClass(tb,'uiButton')||l.hasClass(tb,"_42fu"))l.addClass(tb,'selected');}ea.show();ia=tb;fa=true;var ub=null;if(ga){ub='show';kb(tb);}else{ub='init_show';new i().setURI('/ajax/friends/lists/flyout_content.php').setStatusElement(ea.getContent()).send();}jb();ja=g.listen(tb,'mouseleave',ob);ma=t.subscribe('show',mb);if(m.get(tb,'flfcloselistener'))clearTimeout(m.remove(tb,'flfcloselistenertimeout'));var vb=fb(tb);r.getFriend(vb,function(wb){if(wb.status==r.ARE_FRIENDS)new i().setURI('/ajax/friends/lists/flyout_log.php').setData({target_id:fb(tb),unref:ib(tb),action:ub}).send();if(!ha)return;if(wb.status==r.OUTGOING_REQUEST){l.show(ha);i.bootstrap('/ajax/friends/lists/nux_flyout.php',null,true);}else l.hide(ha);});}function mb(tb,ub){if(!(ub instanceof k)||!p.contains(ia,ub.getContext()))ob();}function nb(tb){ia=tb;ka=lb.curry(tb).defer(pa);ja=g.listen(tb,'mouseleave',function(){clearTimeout(ka);ia=null;ja&&ja.remove();});}function ob(){la=qb.defer(150);}function pb(){var tb=n.getCurrent(),ub=tb&&tb.getBody();return !!(ub&&p.scry(ub,'.friendListDialogTourCarousel')[0]);}function qb(){if(na||pb())return;ba.ie()<8&&document.documentElement.focus();if(ea){ea.hide();var tb=ea.getCausalElement();tb&&tb.setAttribute('aria-expanded','false');}}function rb(event){var tb=x.byTag(event.getTarget(),'a');if(tb&&l.hasClass(tb,'FriendListActionItem'))ob();}function sb(tb){var ub=m.remove(tb,'flfcloselistener');ub&&ub();}e.exports=a.FriendListFlyoutController||ra;});
__d("AddFriendButton",["Event","Animation","Arbiter","AsyncRequest","AsyncResponse","collectDataAttributes","CSS","DOMQuery","FriendListFlyoutController","FriendStatus","ge","goURI","Style","URI"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Animation'),i=b('Arbiter'),j=b('AsyncRequest'),k=b('AsyncResponse'),l=b('collectDataAttributes'),m=b('CSS'),n=b('DOMQuery'),o=b('FriendListFlyoutController'),p=b('FriendStatus'),q=b('ge'),r=b('goURI'),s=b('Style'),t=b('URI'),u={ERROR_ALREADY_ADDED:1431005,init:function(v,w,x,y,z,aa,ba,ca,da,ea,fa){var ga=v.id,ha=null,ia=n.scry(v,'.addButton')[0],ja=n.scry(v,'.addFriendText')[0],ka=n.scry(v,'.outgoingButton')[0],la=n.scry(v,'.incomingButton')[0],ma=n.scry(v,'.friendButton')[0];function na(ta,ua,va){var wa=new t(ia.getAttribute('ajaxify')),xa=l(v,['ft','gt']);new j().setURI(aa).setData({to_friend:w,action:ta,how_found:y,ref_param:z,link_data:xa,outgoing_id:ka.id,xids:wa.getQueryData().xids,logging_location:ba,no_flyout_on_click:ca,ego_log_data:da,http_referer:fa}).setErrorHandler(ua).setServerDialogCancelHandler(va).setRelativeTo(ka).send();}function oa(ta,ua){if(ja){m.hide(ja);}else if(ia)m.hide(ia);ka&&m.hide(ka);la&&m.hide(la);ma&&m.hide(ma);if(ta)m.show(ta);if('Outgoing'==ua&&ha!=ua&&ea)new h(ta).from('backgroundColor','#FFF8CC').to('backgroundColor','transparent').from('borderColor','#FFE222').to('borderColor',s.get(ta,'borderLeftColor')).duration(2000).go();ha&&m.removeClass(v,'fStatus'+ha);ha=ua;m.addClass(v,'fStatus'+ua);}function pa(ta){if(m.hasClass(ta,'enableFriendListFlyout')){o.show(ta);}else o.hide();}var qa=i.subscribe('FriendRequest/change',function(ta,ua){sa();if(ua.uid!=w)return;switch(ua.status){case p.ARE_FRIENDS:return oa(ma,'Friends');case p.INCOMING_REQUEST:return oa(la,'Incoming');case p.OUTGOING_REQUEST:return oa(ka,'Outgoing');case p.CAN_REQUEST:return oa(ja?ja:ia,'Requestable');}}),ra;if(x)ra=i.subscribe('FriendRequest/confirm',function(ta,ua){sa();ua.uid==w&&r(x);});ia&&g.listen(ia,'click',function(){i.inform('FriendRequest/sending',{uid:w});if(ca){o.setActiveNode(ka);}else pa(ka);na("add_friend",function(ta){var ua=ta.error==u.ERROR_ALREADY_ADDED?'FriendRequest/sent':'FriendRequest/sendFail';i.inform(ua,{uid:w});o.hide();k.defaultErrorHandler(ta);},function(ta){i.inform('FriendRequest/sendFail',{uid:w});o.hide();});});function sa(){if(q(ga))return;qa&&qa.unsubscribe();ra&&ra.unsubscribe();qa=ra=null;}}};e.exports=u;});
__d("legacy:FriendStatus",["FriendStatus"],function(a,b,c,d){a.FriendStatus=b('FriendStatus');},3);
__d("FriendButtonIcon",["Arbiter","FriendStatus","Button","arrayContains"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('FriendStatus'),i=b('Button'),j=b('arrayContains');e.exports={register:function(k,l,m){g.subscribe('FriendListMembershipChange',function(n,o){if(o.uid==m){var p=j(o.lists,h.CLOSE_FRIENDS),q=j(o.lists,h.ACQUAINTANCES);if(p&&!q){i.setIcon(k,l.close);}else if(q&&!p){i.setIcon(k,l.acquaintance);}else i.setIcon(k,l.friend);}});}};});
__d("RespondToRequestButton",["Event","Arbiter","CSS","MenuDeprecated"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('CSS'),j=b('MenuDeprecated'),k={init:function(l,m,n,o){g.listen(m,'click',function(){i.addClass(m,'uiButtonConfirm');i.addClass(m,'selected');n.show();});n.subscribe('hide',function(){i.removeClass(m,'uiButtonConfirm');i.removeClass(m,'selected');});j.subscribe('select',function(p,q){if(!i.hasClass(q.menu,'requestResponseMenu'))return;if(q.item.firstChild.getAttribute('data-profileid')!=l)return;if(i.hasClass(q.item,'reject')){i.hide(m);i.show(o);}n.hide();h.inform('FriendRequest/delete');});h.subscribe('CONNECTION_REQUEST',function(p,q){if(q.hidden&&q.id==l){i.hide(m);i.show(o);}});}};e.exports=k;});
__d("legacy:RespondToRequestButton",["RespondToRequestButton"],function(a,b,c,d){a.RespondToRequestButton=b('RespondToRequestButton');},3);
__d("EscapeHatchFriendReject",["Arbiter","DOM","Parent","$","tx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('DOM'),i=b('Parent'),j=b('$'),k=b('tx'),l={init:function(m,n){g.subscribe('CONNECTION_REQUEST',function(o,p){if(p.hidden&&p.id==n)h.setContent(i.byTag(j(m),'span'),"Request Deleted");});}};e.exports=l;});