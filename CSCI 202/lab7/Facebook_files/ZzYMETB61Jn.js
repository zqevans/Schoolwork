/*1366841803,173217319*/

if (self.CavalryLogger) { CavalryLogger.start_js(["eqiI6"]); }

__d("GroupMemberSelector",["Event","copyProperties","DOM","Form","SelectorDeprecated","URI"],function(a,b,c,d,e,f){var g=b('Event'),h=b('copyProperties'),i=b('DOM'),j=b('Form'),k=b('SelectorDeprecated'),l=b('URI');function m(n,o,p,q,r){this._form=n;this._search=i.find(o,'input');this._viewFilter=p;this._groupURI=r;this._orderField=q;k.listen(p,'change',this.onFilter.bind(this));g.listen(n,'submit',this.onSubmit.bind(this));this._search.removeAttribute('disabled');}h(m.prototype,{onFilter:function(){this.onSubmit();},onSubmit:function(){var n=k.getValue(this._viewFilter)||'',o=n.split('-'),p=o[0]||null;this._orderField.value=o[1]||null;if(p=='admins'){this._form.action=this._groupURI+'admins/';}else if(p=='blocked'){this._form.action=this._groupURI+'blocked/';}else this._form.action=this._groupURI+'members/';this._form.view.disabled=true;if(this._search.value==this._search.placeholder)this._form.query.disabled=true;l(this._form.action).setQueryData(j.serialize(this._form)).go();return false;}});e.exports=m;});
__d("ProfileBrowser",["ArbiterMixin","AsyncRequest","CSS","Input","URI","$","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('AsyncRequest'),i=b('CSS'),j=b('Input'),k=b('URI'),l=b('$'),m=b('copyProperties');function n(o,p){this.selectionLimit=p.selectionLimit;this.hubBehaviors=p.hubBehaviors;this.hubsData=p.hubsData;this.listView=o.listView;this.selector=o.selector;this.typeahead=o.typeahead;this.hubs=o.hubsTypeahead;this.target=this.listView.getActiveList();this.subscribeListView();this.selector&&this.subscribeSelector();this.typeahead&&this.subscribeTypeahead();this.hubs&&this.subscribeHubs();}m(n.prototype,g,{subscribeListView:function(){this.listView.subscribe('clickedCheckable',function(o,p){this.listView.toggleCheckableItem(p.item,!i.hasClass(p.item,'selectedCheckable'));}.bind(this));},subscribeSelector:function(){var o=this.typeahead&&this.typeahead.getCore();this.selector.subscribe('changeTarget',function(p,q){if(o){i.conditionShow(this.typeahead.getElement(),q.showtypeahead);o.getValue()&&o.reset();q.showtypeahead&&o.getElement().focus();}this.target=l(q.target);q.isprimer&&this.listView.setLoadingState(true);this.listView.swapList(this.target);this.hubs&&i.conditionShow(this.hubs.getElement(),q.hubs);}.bind(this));this.selector.subscribe('changeHub',function(p,q){var r=this.hubs.getCore(),s=r.getElement();this.hubs.init(this.hubBehaviors);this.hubs.swapData(this.hubsData[q.value]);r.reset();j.setPlaceholder(s,q.placeholder);s.focus();this.hubendpoint=k(q.endpoint);}.bind(this));},subscribeTypeahead:function(){this.typeahead.subscribe('render',function(){var o=this.typeahead.getCore().getValue()?this.typeahead.getView().element:this.target;this.listView.swapList(o);}.bind(this));this.typeahead.subscribe('reset',function(){this.listView.swapList(this.target);}.bind(this));this.typeahead.subscribe('loading',function(o,p){i.conditionClass(this.typeahead.getElement(),'loading',p.loading);}.bind(this));},subscribeHubs:function(){this.hubs.subscribe('select',function(o,p){this.hubendpoint.addQueryData({node:p.selected.uid,pagetext:p.selected.text,offset:0,target:this.target.id});i.addClass(this.hubs.getElement(),'hubsLoading');new h(this.hubendpoint).setReadOnly(true).setMethod('POST').setRelativeTo(this.selector.getSelectedAnchor()).setHandler(function(){i.removeClass(this.hubs.getElement(),'hubsLoading');}.bind(this)).send();}.bind(this));},getSelectionLimit:function(){return this.selectionLimit;}});e.exports=n;});
__d("ProfileBrowserListView",["Event","ArbiterMixin","CSS","DOM","Parent","Vector","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('ArbiterMixin'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('Vector'),m=b('copyProperties'),n=800;function o(p,q,r){this._root=p;this._activeList=q;this._windowTrigger=r;g.listen(p,'click',this._handleClick.bind(this));}m(o.prototype,h,{resetScroll:function(){this._scroll&&this._scroll.remove();this._listenForScroll();},toggleCheckableItem:function(p,q){var r=j.find(p,'input.checkbox');r.checked=q;i.conditionClass(p,'selectedCheckable',q);var s=p.nextSibling||p.previousSibling;s&&i.addClass(s,'sib')&&i.removeClass(s,'sib');},setLoadingState:function(p){i.conditionClass(this._root,'showListviewLoading',p);},swapList:function(p){i.addClass(this._activeList,'hiddenList');this._activeList=p;i.show(this._activeList);i.removeClass(this._activeList,'hiddenList');},getRoot:function(){return this._root;},getActiveList:function(){return this._activeList;},setActiveList:function(p){this._activeList=p;return this;},_handleClick:function(event){var p=event.getTarget(),q=k.byClass(p,'checkableListItem');if(!q)return;var r=k.byClass(p,'anchor');if(!r&&k.byTag(p,'a'))return;if(!i.hasClass(q,'disabledCheckable')){r&&event.prevent();this.inform('clickedCheckable',{item:q});event.stop();}},_listenForScroll:function(){if(this._windowTrigger){this._rootHeight=l.getElementDimensions(this._root).y;if(this._rootHeight)this._scroll=g.listen(window,'scroll',this._handleWindowScroll.bind(this));}else this._scroll=g.listen(this._activeList,'scroll',this._handleListScroll.bind(this));},_handleWindowScroll:function(p){var q=this._rootHeight-l.getScrollPosition().y;if(q<=n)this.inform('scrollTrigger');},_handleListScroll:function(p){var q=p.getTarget(),r=q.scrollHeight-q.scrollTop;if(n>r)this.inform('scrollTrigger');}});e.exports=o;});
__d("ProfileBrowserSelector",["ArbiterMixin","Button","DOM","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('Button'),i=b('DOM'),j=b('copyProperties');function k(l,m){this._buttonElem=l;this._menu=m;m.forEachItem((function(n){if(n.isSelected&&n.isSelected())this._selectedItem=n;}).bind(this));this._menu.subscribe('change',function(n,o){this.handle(o);}.bind(this));}j(k.prototype,g,{handle:function(l){this._selectedItem=l.item;h.setLabel(this._buttonElem,l.item.getLabel());var m=l.item.getRoot(),n=m.getAttribute('data-selectendpoint'),o=m.getAttribute('data-target');if(o)this.inform('changeTarget',{target:o,value:l.value,isprimer:i.find(m,'a').getAttribute('rel')=='async',showtypeahead:m.getAttribute('data-typeahead'),hubs:!!n});if(n)this.inform('changeHub',{value:l.value,placeholder:m.getAttribute('data-placeholder'),endpoint:n});},getSelectedValue:function(){return this._selectedItem.getValue();},getSelectedAnchor:function(){return i.find(this._selectedItem.getRoot(),'a');}});e.exports=k;});